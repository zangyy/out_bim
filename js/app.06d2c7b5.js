(function(e){function t(t){for(var a,o,s=t[0],l=t[1],c=t[2],h=0,u=[];h<s.length;h++)o=s[h],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&u.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(u.length)u.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],a=!0,o=1;o<i.length;o++){var l=i[o];0!==n[l]&&(a=!1)}a&&(r.splice(t--,1),e=s(s.s=i[0]))}return e}var a={},n={app:0},r=[];function o(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"16d01723"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.e=function(e){var t=[],i=n[e];if(0!==i)if(i)t.push(i[2]);else{var a=new Promise((function(t,a){i=n[e]=[t,a]}));t.push(i[2]=a);var r,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=o(e);var c=new Error;r=function(t){l.onerror=l.onload=null,clearTimeout(h);var i=n[e];if(0!==i){if(i){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",c.name="ChunkLoadError",c.type=a,c.request=r,i[1](c)}n[e]=void 0}};var h=setTimeout((function(){r({type:"timeout",target:l})}),12e4);l.onerror=l.onload=r,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(i,a,function(t){return e[t]}.bind(null,a));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var h=0;h<l.length;h++)t(l[h]);var d=c;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("cd49")},"6c8c":function(e,t){!function(e){var t,i,a,n,r,o,s='<svg><symbol id="icon-ic_invisible" viewBox="0 0 1024 1024"><path d="M931.968 282.965333a32 32 0 0 0-45.248-0.874666c-119.274667 114.794667-245.994667 170.944-376.341333 167.296-211.818667-6.144-365.76-169.962667-367.274667-171.626667a32 32 0 0 0-47.061333 43.370667c4.202667 4.565333 67.029333 71.402667 168.810666 125.056 0 0.746667-0.106667 1.472-0.064 2.24 2.154667 28.458667 0.618667 109.674667-31.893333 143.104-10.090667 10.368-22.4 14.912-38.634667 14.058666a32 32 0 1 0-3.050666 63.936c2.154667 0.085333 4.288 0.149333 6.4 0.149334 31.850667 0 59.84-11.562667 81.258666-33.642667 42.112-43.413333 49.834667-117.525333 50.496-160.426667a543.296 543.296 0 0 0 147.328 35.392l5.546667 227.861334a32 32 0 0 0 31.978667 31.210666h0.789333a32 32 0 0 0 31.210667-32.768l-5.44-224.234666c63.936-2.325333 126.677333-17.109333 187.904-44.330667-8.064 63.616 8 154.346667 104.490666 219.946667a31.957333 31.957333 0 0 0 35.989334-52.906667c-112.618667-76.586667-71.082667-186.218667-69.162667-191.104 1.984-4.928 2.517333-10.026667 2.048-14.976 43.946667-27.264 87.04-61.034667 129.088-101.504a32.021333 32.021333 0 0 0 0.832-45.226667z" fill="#333333" ></path></symbol><symbol id="icon-ic_visible" viewBox="0 0 1024 1024"><path d="M119.466667 424.853333a32 32 0 0 1-25.450667-51.392c7.04-9.258667 175.274667-226.688 417.877333-233.472 148.864-3.946667 290.24 71.573333 421.248 225.045334a32 32 0 0 1-48.682666 41.557333c-117.781333-138.026667-242.389333-206.357333-370.773334-202.624-212.330667 5.952-367.210667 206.250667-368.746666 208.277333a31.957333 31.957333 0 0 1-25.472 12.608zM908.821333 587.861333a32 32 0 0 1 25.450667 51.392c-7.04 9.258667-175.274667 226.688-417.877333 233.472-148.885333 3.925333-290.261333-71.594667-421.269334-225.066666a32 32 0 0 1 48.682667-41.557334c117.781333 138.026667 242.389333 206.357333 370.773333 202.624 212.352-5.930667 367.210667-206.229333 368.768-208.256a31.893333 31.893333 0 0 1 25.472-12.608z" fill="#333333" ></path><path d="M514.133333 672.042667c-96.789333 0-175.509333-74.325333-175.509333-165.696s78.72-165.696 175.509333-165.696 175.530667 74.325333 175.530667 165.696-78.741333 165.696-175.530667 165.696z m0-267.392c-61.482667 0-111.509333 45.632-111.509333 101.696s50.026667 101.696 111.509333 101.696 111.530667-45.610667 111.530667-101.696-50.026667-101.696-111.530667-101.696z" fill="#333333" ></path></symbol></svg>',l=(l=document.getElementsByTagName("script"))[l.length-1].getAttribute("data-injectcss");if(l&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(e){console&&console.log(e)}}function c(){r||(r=!0,a())}t=function(){var e,t,i;(i=document.createElement("div")).innerHTML=s,s=null,(t=i.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",e=t,(i=document.body).firstChild?(t=i.firstChild).parentNode.insertBefore(e,t):i.appendChild(e))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):(i=function(){document.removeEventListener("DOMContentLoaded",i,!1),t()},document.addEventListener("DOMContentLoaded",i,!1)):document.attachEvent&&(a=t,n=e.document,r=!1,(o=function(){try{n.documentElement.doScroll("left")}catch(e){return void setTimeout(o,50)}c()})(),n.onreadystatechange=function(){"complete"==n.readyState&&(n.onreadystatechange=null,c())})}(window)},"80de":function(e,t,i){},"85f8":function(e,t,i){},cd49:function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("7a23");function n(e,t){var i=Object(a["N"])("router-view");return Object(a["F"])(),Object(a["k"])(i)}i("cf90");var r=i("d959"),o=i.n(r);const s={},l=o()(s,[["render",n]]);var c=l,h=(i("d3b7"),i("3ca3"),i("ddb0"),i("6c02")),d=(i("b64b"),{class:"wrap-xbim"}),u={class:"info noselect"},f={style:{"font-family":"Arial, Helvetica, sans-serif","margin-top":"18px"}},v={class:"wrap-right-top noselect"},g={class:"card-header"},p=Object(a["o"])("span",null,"剖切信息",-1),m=Object(a["o"])("i",{style:{"font-size":"20px"},class:"el-icon-close"},null,-1),b={class:"main"},w=Object(a["o"])("svg",{t:"1629252160463",class:"icon",viewBox:"0 0 1042 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9328",width:"200",height:"200"},[Object(a["o"])("path",{d:"M944.37744629 201.8213501l-4.41897583-2.41094971a29.3302002 29.3302002 0 0 0-6.02737427-6.02655029L761.16339599 94.1427002a29.7322998 29.7322998 0 0 0-28.12472534-1e-8L560.27097046 193.3838501l-4.82189942 4.82189941-6.83074951 4.0177002a8.83959961 8.83959961 0 0 0-4.41897583 7.63330078v16.875l-8.4375-4.82107544a29.7322998 29.7322998 0 0 0-29.7322998 0l-8.4375 4.82107544v-16.07080078a8.83959961 8.83959961 0 0 0-5.62527466-8.83959961l-6.83074951-4.0177002s-2.81222534-3.61642456-4.82025147-4.82189941L307.54724609 94.1427002a29.7322998 29.7322998 0 0 0-29.7322998-1e-8L105.04724609 193.3838501a28.92892456 28.92892456 0 0 0-6.4286499 6.4286499l-4.41979981 2.41094971a8.83959961 8.83959961 0 0 0-4.01770019 8.4375v217.3661499a8.83959961 8.83959961 0 0 0 4.4197998 7.63330078l4.41979981 2.41094971a28.52682495 28.52682495 0 0 0 6.4286499 6.4286499l172.7677002 99.2411499a29.7322998 29.7322998 0 0 0 29.7322998 0l9.64297485-5.62527466v8.4375a30.13357544 30.13357544 0 0 0 13.66149903 25.71459961l4.41897583 2.41094971-15.67034912 8.83877564a8.83959961 8.83959961 0 0 0-4.41897583 7.63412475v218.57162476a8.4375 8.4375 0 0 0 4.01770019 7.23202514 29.3302002 29.3302002 0 0 0 11.65100098 13.66067505l172.76852417 99.24114991a29.7322998 29.7322998 0 0 0 29.7322998 0l172.7677002-99.24114991a29.3302002 29.3302002 0 0 0 11.65100098-13.66149902 8.4375 8.4375 0 0 0 4.01852416-7.23120117V591.15100098a8.83959961 8.83959961 0 0 0-4.4197998-7.63412476L702.5029956 574.67974854l4.42062378-2.41094971a30.13357544 30.13357544 0 0 0 14.86532593-25.71459961v-8.4375l9.64297485 5.62527466a29.7322998 29.7322998 0 0 0 29.73229981 0l172.76770019-99.2411499a29.7322998 29.7322998 0 0 0 6.02737427-6.0265503l4.41897583-2.4109497a8.83959961 8.83959961 0 0 0 4.41979981-7.63412476v-217.76824951a8.83959961 8.83959961 0 0 0-4.41979981-8.83877564zM523.70874512 474.23229981a8.83959961 8.83959961 0 0 0-8.43750001 0l-134.99999999 75.93749999-19.68722535-11.65182495v-25.71459961l120.53594971-68.70547485 4.82107544-4.82107544 6.02655029-3.61642456a8.83959961 8.83959961 0 0 0 4.41979981-7.63330078V276.95547485l23.3036499-13.25939941 23.3036499 13.25939941v151.07162476a8.83959961 8.83959961 0 0 0 4.41979981 7.63330078l6.83074951 3.61642456a28.92892456 28.92892456 0 0 0 4.82025146 4.82107544l120.53594971 68.70547485v25.3125l-19.68722534 11.65182496z","p-id":"9329"})],-1),y=Object(a["o"])("svg",{t:"1629249474393",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2010",width:"200",height:"200"},[Object(a["o"])("path",{d:"M970.13086 772.288158a54.60719 54.60719 0 0 0-54.60719 53.753952v89.589921H108.361143V108.469504h85.323734A54.60719 54.60719 0 0 0 255.971203 53.862314 53.753953 53.753953 0 0 0 198.804301 0.108361H53.753953A53.753953 53.753953 0 0 0 0 53.862314v916.376907a57.166902 57.166902 0 0 0 15.358272 38.395681 57.166902 57.166902 0 0 0 38.395681 15.358272h916.376907a52.900715 52.900715 0 0 0 53.753953-53.753953V826.04211a53.753953 53.753953 0 0 0-53.753953-53.753952z","p-id":"2011"}),Object(a["o"])("path",{d:"M380.115011 575.768422m21.229905-46.584776l63.689717-139.754329q21.229906-46.584776 67.814682-25.35487l0 0q46.584776 21.229906 25.354871 67.814682l-63.689717 139.754328q-21.229906 46.584776-67.814682 25.354871l0 0q-46.584776-21.229906-25.354871-67.814682Z","p-id":"2012"}),Object(a["o"])("path",{d:"M472.890248 617.612203m-46.584776-21.229906l-139.754329-63.689717q-46.584776-21.229906-25.35487-67.814681l0 0q21.229906-46.584776 67.814682-25.354871l139.754328 63.689717q46.584776 21.229906 25.354871 67.814682l0 0q-21.229906 46.584776-67.814682 25.35487Z","p-id":"2013"}),Object(a["o"])("path",{d:"M357.506447 454.883866l96.41582-34.129494a238.906456 238.906456 0 1 1 304.605732 145.903586l34.129494 97.269057a341.294938 341.294938 0 1 0-435.151046-209.043149z","p-id":"2014"}),Object(a["o"])("path",{d:"M406.140976 437.819119m-51.194241 0a51.194241 51.194241 0 1 0 102.388481 0 51.194241 51.194241 0 1 0-102.388481 0Z","p-id":"2015"}),Object(a["o"])("path",{d:"M775.592746 615.292486m-51.194241 0a51.194241 51.194241 0 1 0 102.388481 0 51.194241 51.194241 0 1 0-102.388481 0Z","p-id":"2016"})],-1),k=Object(a["o"])("svg",{t:"1629252202704",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10147",width:"200",height:"200"},[Object(a["o"])("path",{d:"M394.667 560.64v-97.28l68.693-68.693h79.787l75.627-162.133h-304.32l-279.253 279.253 279.253 279.68h10.88l1.707 60.053 31.147-60.053 85.013-182.4zM988.8 511.787l-279.253-279.253h-7.36l-9.813-60.8-26.56 60.8-85.013 182.4 48.533 48.427v97.28l-68.693 68.693h-79.787l-75.627 162.133h304.32z","p-id":"10148"})],-1),O={class:"card-header"},P=Object(a["o"])("span",null,"信息面板",-1),C=Object(a["o"])("i",{style:{"font-size":"20px"},class:"el-icon-close"},null,-1),_={key:0,class:"Not_yet"},x=Object(a["o"])("svg",{t:"1628845369151",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3049",width:"200",height:"200"},[Object(a["o"])("path",{d:"M512 0C230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512S793.6 0 512 0z m0 960C265.6 960 64 758.4 64 512S265.6 64 512 64s448 201.6 448 448-201.6 448-448 448z",fill:"","p-id":"3050"}),Object(a["o"])("path",{d:"M512 800m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0Z",fill:"","p-id":"3051"}),Object(a["o"])("path",{d:"M553.6 672h-83.2L448 160h128z",fill:"","p-id":"3052"})],-1),D=Object(a["n"])(" 暂无属性，请选择一个构件/零件 "),E={class:"key"},M={class:"val"},T=Object(a["o"])("div",{class:"card-header"},[Object(a["o"])("span",null,"颜色面板")],-1),L=Object(a["o"])("div",{class:"item"},[Object(a["o"])("div",{style:{width:"25px",height:"25px",background:"#f52443"}}),Object(a["o"])("span",{class:"text"},"运输中")],-1),A=Object(a["o"])("div",{class:"item"},[Object(a["o"])("div",{style:{width:"25px",height:"25px",background:"#f08300"}}),Object(a["o"])("span",{class:"text"},"加工中")],-1),j=Object(a["o"])("div",{class:"item"},[Object(a["o"])("div",{style:{width:"25px",height:"25px",background:"#ffff24"}}),Object(a["o"])("span",{class:"text"},"安装中")],-1),S=Object(a["o"])("div",{class:"item"},[Object(a["o"])("div",{style:{width:"25px",height:"25px",background:"#02b340"}}),Object(a["o"])("span",{class:"text"},"未开始")],-1),I=Object(a["o"])("div",{class:"item"},[Object(a["o"])("div",{style:{width:"25px",height:"25px",background:"#79d2d2"}}),Object(a["o"])("span",{class:"text"},"加工完成")],-1),R=Object(a["o"])("div",{class:"item"},[Object(a["o"])("div",{style:{width:"25px",height:"25px",background:"#2e62cd"}}),Object(a["o"])("span",{class:"text"},"安装完成")],-1),z=Object(a["o"])("div",{class:"item"},[Object(a["o"])("div",{style:{width:"25px",height:"25px",background:"#cc99ff"}}),Object(a["o"])("span",{class:"text"},"运输完成")],-1),N={id:"xBIM-viewer",ref:"canvas"},U=Object(a["o"])("div",{id:"divcontainer"},[Object(a["o"])("div",{id:"aaa"})],-1),B={key:1,class:"tip-walk"},F={key:2,class:"mask"},X=Object(a["o"])("div",{class:"prg"},[Object(a["o"])("p",null,"模型载入中...请稍后...")],-1),V={class:"toolbar"},H=Object(a["o"])("svg",{t:"1629422901429",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2147",width:"200",height:"200"},[Object(a["o"])("path",{d:"M393.846154 78.769231v866.461538H78.769231V78.769231h315.076923m78.769231-78.769231H0v1024h472.615385V0zM945.230769 78.769231v315.076923h-315.076923V78.769231h315.076923m78.769231-78.769231H551.384615v472.615385h472.615385V0zM945.230769 630.153846v315.076923h-315.076923v-315.076923h315.076923m78.769231-78.769231H551.384615v472.615385h472.615385V551.384615z","p-id":"2148"})],-1),Y=Object(a["o"])("svg",{t:"1628839845215",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1513",width:"200",height:"200"},[Object(a["o"])("path",{d:"M294.8 22.8L23.2 294.3c-12.5 12.5-12.5 32.8 0 45.3l656.2 656.2c12.5 12.5 32.8 12.5 45.3 0l271.5-271.5c12.5-12.5 12.5-32.8 0-45.3L340 22.8c-12.5-12.5-32.8-12.5-45.2 0z m-198 288.5l215-215c3.1-3.1 8.2-3.1 11.3 0l33.9 33.9c3.1 3.1 3.1 8.2 0 11.3l-96.2 96.2 45.3 45.3 96.2-96.2c3.1-3.1 8.2-3.1 11.3 0l22.4 22.4c3.1 3.1 3.1 8.2 0 11.3l-62.2 62.2L419 328l62.2-62.2c3.1-3.1 8.2-3.1 11.3 0l22.4 22.4c3.1 3.1 3.1 8.2 0 11.3l-62.2 62.2L498 407l62.2-62.2c3.1-3.1 8.2-3.1 11.3 0l23.1 23.1c3.1 3.1 3.1 8.2 0 11.3l-96.2 96.2 45.3 45.3 96.2-96.2c3.1-3.1 8.2-3.1 11.3 0l22.4 22.4c3.1 3.1 3.1 8.2 0 11.3l-62.2 62.2 45.3 45.3 62.2-62.2c3.1-3.1 8.2-3.1 11.3 0l22.4 22.4c3.1 3.1 3.1 8.2 0 11.3l-62.2 62.2 45.3 45.3 62.2-62.2c3.1-3.1 8.2-3.1 11.3 0l23.1 23.1c3.1 3.1 3.1 8.2 0 11.3l-96.3 96 45.3 45.3 96.2-96.2c3.1-3.1 8.2-3.1 11.3 0l33.9 33.9c3.1 3.1 3.1 8.2 0 11.3l-215 215c-3.1 3.1-8.2 3.1-11.3 0L96.8 322.6a7.85 7.85 0 0 1 0-11.3z","p-id":"1514"})],-1),W=Object(a["o"])("svg",{t:"1628840033569",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2756",width:"200",height:"200"},[Object(a["o"])("path",{d:"M605.440831 444.871267a32.779988 32.779988 0 0 1-12.784195-2.762885L191.757381 249.783509a30.157589 30.157589 0 0 1 0-54.508437L528.033231 2.90337a30.719532 30.719532 0 0 1 26.130333 0l393.219372 192.371702a29.548818 29.548818 0 0 1 16.670965 27.254219 30.532217 30.532217 0 0 1-16.670965 27.254218l-328.595967 191.997074a29.595646 29.595646 0 0 1-13.346138 3.324827zM274.597094 222.529291l330.796909 158.467828L865.198823 222.529291l-324.240911-158.467829z","p-id":"2757"}),Object(a["o"])("path",{d:"M605.440831 843.56958a32.779988 32.779988 0 0 1-12.784195-2.762885l-400.852426-192.371702a30.157589 30.157589 0 0 1 0-54.508437L528.033231 401.554854a30.719532 30.719532 0 0 1 26.130333 0l393.078886 192.371702a29.548818 29.548818 0 0 1 16.670965 27.254219 30.532217 30.532217 0 0 1-16.670965 27.254218l-328.595966 191.997074c-4.448713 2.200942-73.380345 3.324827-77.829058 3.324827z m-328.595966-222.388805l328.595966 158.467828L865.198823 621.180775l-324.240911-158.467829z","p-id":"2758"}),Object(a["o"])("path",{d:"M605.440831 845.81735a38.2121 38.2121 0 0 1-13.346138-2.762884l-395.326656-192.418531A30.344903 30.344903 0 1 1 223.647627 596.174327L605.440831 782.036859l315.249829-185.722047a30.344903 30.344903 0 0 1 26.692276 54.508438L618.786969 842.91398a28.84639 28.84639 0 0 1-13.346138 2.762885z","p-id":"2759"}),Object(a["o"])("path",{d:"M934.036798 645.110166a29.876618 29.876618 0 0 1-30.017104-30.017103V227.539946a30.017103 30.017103 0 0 1 60.034207 0v386.991174a30.017103 30.017103 0 0 1-30.017103 30.579046z m-732.820049 3.324827a29.876618 29.876618 0 0 1-30.017103-30.017103V227.539946a30.017103 30.017103 0 0 1 60.034207 0v390.877944a29.876618 29.876618 0 0 1-30.017104 30.017103zM90.045761 713.479855a29.876618 29.876618 0 0 1-30.017103-30.017103V292.584808a30.017103 30.017103 0 1 1 60.034206 0v390.877944a29.876618 29.876618 0 0 1-30.017103 30.017103z","p-id":"2760"}),Object(a["o"])("path",{d:"M90.045761 469.971372a29.876618 29.876618 0 0 1-30.063932-30.017103V49.076325a30.017103 30.017103 0 1 1 60.034207 0v390.877944a30.251246 30.251246 0 0 1-30.017104 30.017103zM62.791542 674.331184a30.43856 30.43856 0 0 1 40.600357-14.048566l350.83953 171.813966a30.344903 30.344903 0 1 1-26.692276 54.508437L76.699623 715.165683a30.43856 30.43856 0 0 1-14.048566-40.600356z","p-id":"2761"}),Object(a["o"])("path",{d:"M337.441014 808.541821a30.43856 30.43856 0 0 1 40.600357-14.048566l350.83953 171.813966a30.344903 30.344903 0 0 1-26.692276 54.508437l-350.83953-171.67348a30.43856 30.43856 0 0 1-14.048567-40.600357zM62.791542 29.033704a30.43856 30.43856 0 0 1 40.600357-14.048567l350.792701 171.954452a30.344903 30.344903 0 1 1-26.692276 54.508438L76.699623 69.63406A30.625875 30.625875 0 0 1 62.791542 29.033704z","p-id":"2762"}),Object(a["o"])("path",{d:"M337.441014 163.057027a30.43856 30.43856 0 0 1 40.600357-14.048567l350.83953 171.813966a30.344903 30.344903 0 0 1-26.692276 54.508438L351.349095 203.095441a29.829789 29.829789 0 0 1-14.048567-40.038414z m378.093749 856.962546a29.876618 29.876618 0 0 1-30.017104-30.017104V598.937211a30.017103 30.017103 0 1 1 60.034207 0v390.877944a29.876618 29.876618 0 0 1-30.204418 30.017104z","p-id":"2763"}),Object(a["o"])("path",{d:"M715.347448 791.870856a29.876618 29.876618 0 0 1-30.017103-30.017104V370.975808a30.017103 30.017103 0 1 1 60.034207 0v390.877944a30.251246 30.251246 0 0 1-30.017104 30.017104z m-84.291398-374.628436l4.448713 390.877944-60.596149 0.561943L570.17893 417.710706z","p-id":"2764"}),Object(a["o"])("path",{d:"M566.526302 26.832762l4.448713 390.877944-60.596149 0.561942-4.448713-390.877944z","p-id":"2765"})],-1),G=Object(a["o"])("svg",{t:"1628840249030",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3782",width:"200",height:"200"},[Object(a["o"])("path",{d:"M164.778667 263.978667a425.258667 425.258667 0 0 1 236.8-164.096C629.162667 38.826667 863.146667 173.952 924.117333 401.493333c61.013333 227.626667-74.069333 461.610667-301.653333 522.581334C394.794667 985.173333 160.853333 850.048 99.84 622.506667l82.432-22.101334a341.333333 341.333333 0 1 0 54.570667-290.432l80.384 51.2-182.912 54.101334L85.333333 213.333333l79.445334 50.645334z","p-id":"3783"}),Object(a["o"])("path",{d:"M512 512m-85.333333 0a85.333333 85.333333 0 1 0 170.666666 0 85.333333 85.333333 0 1 0-170.666666 0Z","p-id":"3784"})],-1),K=Object(a["o"])("svg",{t:"1628840315795",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4233",width:"200",height:"200"},[Object(a["o"])("path",{d:"M512 269.27407445c72.81777778 0 131.072-53.39970333 131.072-121.36296334S584.81777778 26.54814777 512 26.54814777 380.928 79.94785223 380.928 147.91111111 439.18222222 269.27407445 512 269.27407445z m165.05363001 116.50844445c-4.8545189-29.12711111-29.12711111-53.39970333-63.10874112-53.39970447h-33.98163001c-9.70903666 0-14.56355555 4.8545189-24.27259221 9.7090378l-43.69066667 33.98162887-43.69066667-38.83614777c-4.8545189-4.8545189-14.56355555-9.70903666-24.27259221-9.70903666h-33.98163001c-33.98163001 0-63.10874112 24.27259221-63.10874112 53.39970333L317.81925888 599.38133333c0 9.70903666 0 19.41807445 9.70903779 24.27259222 4.8545189 4.8545189 14.56355555 9.70903666 24.27259222 9.70903779h33.98163001l29.12711111 310.68918443c4.8545189 29.12711111 29.12711111 53.39970333 63.10873998 53.39970446h72.81777778c33.98163001 0 63.10874112-24.27259221 63.10874112-53.39970446l29.12711111-310.68918443h33.98163001c9.70903666 0 19.41807445-4.8545189 24.27259221-9.70903779 4.8545189-9.70903666 4.8545189-14.56355555 4.8545189-24.27259222l-29.12711111-213.59881443z","p-id":"4234"})],-1),q=Object(a["o"])("svg",{t:"1628840461855",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5529",width:"200",height:"200"},[Object(a["o"])("path",{d:"M184 102.5l65.155-20.597a389.5 389.5 0 0 1 162.65-15.187 195.17 195.17 0 0 1 65.878 20.11l102.976 52.382c71.798 36.284 156.398 37.06 228.85 2.097l59.438-28.868a24.674 24.674 0 0 1 35.456 22.206v446.052a24.674 24.674 0 0 1-13.891 22.207l-60.031 29.152a308.089 308.089 0 0 1-133.942 30.793h-2.183a308.015 308.015 0 0 1-135.632-32.767L452.726 576.66a146.29 146.29 0 0 0-49.089-14.804 340.337 340.337 0 0 0-143.009 13.755L184 600.211V928c0 17.673-14.327 32-32 32-17.673 0-32-14.327-32-32V96c0-17.673 14.327-32 32-32 17.673 0 32 14.327 32 32v6.5z m0 65.118v377.608l73.053-23.46a372.993 372.993 0 0 1 113.2-17.646 378.17 378.17 0 0 1 43.563 2.53 187.192 187.192 0 0 1 62.844 18.98l101.516 51.163a247.506 247.506 0 0 0 218.32 1.596l44.188-21.475v-374.77L817.715 193.3a295.031 295.031 0 0 1-130.9 29.488 294.892 294.892 0 0 1-130.332-31.91l-98.62-50.183a139.8 139.8 0 0 0-47.131-14.419 325.873 325.873 0 0 0-136.122 12.706L184 167.618z","p-id":"5530"})],-1),J={class:"remove_toolbar hidden"},$=Object(a["o"])("svg",{t:"1629076450923",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1905",width:"200",height:"200"},[Object(a["o"])("path",{d:"M957.6 507.4L603.2 158.2c-3.1-3.1-8.1-3.1-11.2 0L353.3 393.4c-3.1 3.1-3.2 8.2-0.1 11.3l0.1 0.1 40 39.4-117.2 115.3c-3.1 3.1-3.2 8.2-0.1 11.3l0.1 0.1 39.5 38.9-189.1 187H72.1c-4.4 0-8.1 3.6-8.1 8V860c0 4.4 3.6 8 8 8h344.9c2.1 0 4.1-0.8 5.6-2.3l76.1-75.6 40.4 39.8c3.1 3.1 8.1 3.1 11.2 0l117.1-115.6 40.1 39.5c3.1 3.1 8.1 3.1 11.2 0l238.7-235.2c3.4-3 3.4-8 0.3-11.2zM389.8 796.2H229.6l134.4-133 80.1 78.9-54.3 54.1z m154.8-62.1L373.2 565.2l68.6-67.6 171.4 168.9-68.6 67.6zM713.1 658L450.3 399.1 597.6 254l262.8 259-147.3 145z","p-id":"1906"})],-1),Z=Object(a["o"])("svg",{t:"1628846031694",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3884",width:"200",height:"200"},[Object(a["o"])("path",{d:"M876.564398 512.149985h30.697002c7.699248 0 15.398496 0 22.997754-2.599746 33.296748-8.999121 46.095498-43.495752 37.096378-104.889757-3.799629-28.197246-24.297627-46.095498-54.99463-46.095498H614.290011v-24.297627c0-65.293624-3.799629-130.487257 0-195.780881C616.889757 75.792598 589.992384 18.198223 537.49751 2.899717c-15.398496-3.799629-38.39625-3.799629-51.195 0C458.105263 13.098721 421.008886 39.996094 413.409628 79.692218c-2.599746 12.79875-3.799629 24.297627-3.799629 35.796504v243.076262H113.938873c-40.896006 0-60.094131 19.198125-60.094131 61.394004v7.699249c0 72.892882 7.699248 80.59213 80.592129 84.491748 2.599746 0 6.399375 1.299873 10.199004 1.299873-28.197246 145.885753-56.294502 290.471634-86.991504 435.057514-7.699248 35.796504 0 62.693878 30.697002 75.492628h844.417537c29.397129-12.79875 38.39625-38.39625 31.996876-72.892882-30.597012-145.985744-58.794258-290.571624-88.191388-438.957133zM509.300264 54.094717c31.996875 0 52.494874 22.997754 52.494873 61.394005 0 74.192755 1.299873 147.185626 1.299873 221.378381v21.797871H459.405136V115.488722c0-37.096377 19.198125-60.194122 49.895128-61.394005zM102.439996 460.954985v-51.195001h818.820037V460.954985H102.439996z m200.880383 511.750024c8.999121-63.993751 17.898252-133.087003 26.897373-199.580509 1.299873-11.498877 2.599746-21.797871 3.799629-31.996876 1.299873-15.398496-3.799629-28.197246-19.198125-30.697002-17.898252-2.599746-28.197246 6.399375-30.697002 22.997754-6.399375 42.195879-11.498877 83.191876-17.898252 125.387755-3.799629 37.096377-8.999121 75.492628-14.098624 113.888878H103.739869c33.296748-153.585001 66.493506-307.070013 101.090128-460.655014h610.340397c33.296748 153.585001 66.493506 307.070013 101.090127 460.655014h-612.940142z","p-id":"3885"})],-1),Q=Object(a["o"])("svg",{t:"1628842947918",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1905",width:"200",height:"200"},[Object(a["o"])("path",{d:"M896.174 63.868l-832.162 0.078v831.693h384.075V831.72l-320.062 0.044-0.035-703.774h704.171v320.218h64.012V63.868z","p-id":"1906"}),Object(a["o"])("path",{d:"M192.08 319.871h384.075v-63.919H192.08v63.919z m0 127.768l320.062 0.069V383.79H192.08v63.849z m0 128.317h192.037v-63.891l-192.037-0.028v63.919z m0 0M705.643 895.619C595.51 897.227 513.32 802.618 513.32 703.408c0-113.439 91.234-192.041 192.323-192.041 118.069 0 192.887 99.598 192.323 192.041-0.633 103.519-81.629 189.647-192.323 192.211z m0-320.238c-72.702 0-128.215 55.33-128.215 128.027 0 72.699 55.514 128.027 128.215 128.027s128.215-55.328 128.215-128.027c0-72.697-55.514-128.027-128.215-128.027z","p-id":"1907"}),Object(a["o"])("path",{d:"M922.723 959.71L801.836 838.828l36.688-36.685 121.7 121.694","p-id":"1908"})],-1),ee={key:0,t:"1629076892265",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2081",width:"200",height:"200"},te=Object(a["o"])("path",{d:"M512 895.581091c-284.811636 0-465.454545-264.424727-465.454545-376.040727v-13.218909c0-111.616 180.642909-376.087273 465.454545-376.087273 287.604364 0 464.477091 260.794182 465.454545 375.482182v13.777454c-0.977455 115.153455-177.803636 376.087273-465.454545 376.087273z m0-695.482182c-240.221091 0-395.636364 227.560727-395.636364 306.269091v13.218909c0 78.708364 155.415273 306.222545 395.636364 306.222546 236.404364 0 394.845091-218.158545 395.636364-306.501819v-13.218909c-0.791273-88.064-159.232-305.989818-395.636364-305.989818z m0 495.709091a183.109818 183.109818 0 0 1-182.923636-182.877091c0-100.864 82.059636-182.923636 182.923636-182.923636s182.923636 82.059636 182.923636 182.923636A183.109818 183.109818 0 0 1 512 695.808z m0-295.982545c-62.370909 0-113.105455 50.734545-113.105455 113.105454 0 62.324364 50.734545 113.058909 113.105455 113.058909s113.105455-50.734545 113.105455-113.058909c0-62.370909-50.734545-113.105455-113.105455-113.105454z","p-id":"2082"},null,-1),ie={key:1,t:"1629081891396",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3053",width:"200",height:"200"},ae=Object(a["o"])("path",{d:"M944.1 462.9c-0.2-0.1-0.4-0.2-0.5-0.4-3.7-2.8-17-12.8-34.4-24.8-1.6-1.1-2-2.7-2-3.5-0.1-0.8 0-2.3 1.4-3.7 13.5-13 26.6-26.6 39-40.6 0.6-0.6 1-1.2 1.5-1.8 12.5-16.6 13-39.2 1.2-56.3-2-2.9-4.4-5.4-7.2-7.3-5.4-3.8-11.7-5.2-18-4.2-12 1.9-20.8 12.1-26.4 19.7-46.3 58.6-205.3 210.2-385.6 210.3-48-0.5-95.1-8.9-140.1-25l-39.7-16.1c-37.8-17.1-74-38-107.5-62.2l-28.1-21.1c-25.5-19.6-49.1-41.8-70-66-0.7-0.8-1.4-1.6-2.2-2.3l-1.8-1.7c-6.2-5.8-11.5-10.8-17.8-13.5-5.3-2.3-15.8-4.6-26.6 5-19 17-14.2 41.3-3.3 58.4 1.1 1.7 2.4 3.3 3.8 4.8 15.9 16 32.7 31.5 50.1 46 1.5 1.3 1.7 2.9 1.7 3.7 0 0.8-0.3 2.4-2 3.6-12.7 9-22.1 15.9-24.7 17.8-0.1 0-0.2 0.1-0.7 0.4-7.8 4.5-13.3 11.7-15.5 20.2-2.4 8.9-0.8 18.4 4.3 26.1 9.5 15.5 29.7 20.8 46 12.1 5.6-3 11.8-7.6 20.5-14 7.4-5.5 16.6-12.3 28.2-20.1 1.7-1.2 4-1.1 5.8 0.1 28.8 19.9 59.4 37.9 90.8 53.6 1.6 0.8 2.3 2.2 2.5 2.9 0.2 0.7 0.5 2.1-0.4 3.6l-28.7 48.3c-4.6 7.6-5.8 16.6-3.5 25.1 2.3 8.6 7.9 15.8 15.9 20.3l0.2 0.1c16.2 8.9 37 3.5 46.5-12l32.9-56.2c1.2-2.1 3.8-2.9 6.1-2.1 38.2 14 78.1 23.2 118.7 27.4 2.6 0.3 4.5 2.3 4.5 4.7V671c0 18.3 15.4 33.3 34.3 33.3s34.3-14.9 34.3-33.3v-49.6c0-2.4 1.9-4.4 4.5-4.7 40.1-4.2 79.5-13.7 117-28.2 2.3-0.9 5 0 6.2 2l34.2 58.5 0.1 0.1c9.5 15.7 29.7 21.1 46.1 12.4l0.3-0.2c7.9-4.5 13.5-11.7 15.8-20.3 2.3-8.5 1.1-17.4-3.5-25L737 562.4c-1.3-2.2-0.5-5.1 1.9-6.4 38.7-21.1 75.7-45.8 110-73.3 1.7-1.4 4.2-1.5 6-0.3 25.1 16.5 45.5 31.2 51.1 35.4 1.9 1.4 3.8 2.5 5.8 3.3 15.9 6.7 34.5 0.9 43.3-13.6 9.2-15.3 4.4-34.9-11-44.6z","p-id":"3054"},null,-1),ne=Object(a["o"])("svg",{t:"1630378276365",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2421",width:"200",height:"200"},[Object(a["o"])("path",{d:"M918.266075 186.599512h-27.419435v-52.133253c0-34.999049-28.362921-63.376296-63.36197-63.376296H617.628525c-34.999049 0-63.36197 28.376224-63.36197 63.376296v52.133253H105.754391c-54.465364 0-98.777503 44.313163-98.777503 98.770341v459.460494c0 54.457177 44.313163 98.757037 98.777503 98.757038h183.51425c51.647184 66.461558 132.248759 109.323676 222.740569 109.323675 90.486693 0 171.109757-42.862118 222.748755-109.323675h183.50811c54.4582 0 98.757037-44.29986 98.757037-98.757038V285.369853c0-54.457177-44.298837-98.77034-98.757037-98.770341z m-300.63755-52.133253H827.48467v52.133253H617.628525v-52.133253zM512.00921 889.533741c-120.588208 0-218.704657-98.108262-218.704657-218.689307 0-120.597418 98.116449-218.692377 218.704657-218.692377 120.597418 0 218.70568 98.094959 218.70568 218.692377 0 120.581045-98.108262 218.689307-218.70568 218.689307z m406.256865-109.30935H771.997026c14.231091-33.66159 22.093137-70.619243 22.093137-109.379957 0-155.540185-126.527465-282.068673-282.080953-282.068674-155.530975 0-282.072767 126.527465-282.072767 282.068674 0 38.760715 7.869209 75.718368 22.078811 109.379957h-146.260863c-19.507247 0-35.401207-15.892937-35.401207-35.394044v-402.649718h652.216205c11.665667 0 21.122021-9.441004 21.122021-21.106671 0-11.666691-9.45533-21.135324-21.122021-21.135324H70.353184v-14.568781c0-19.528736 15.892937-35.394044 35.401207-35.394045h812.511684c19.51441 0 35.379718 15.865308 35.379718 35.394045v14.568781H841.292113c-11.665667 0-21.120998 9.468633-21.120997 21.135324 0 11.665667 9.454307 21.106671 21.120997 21.106671h112.35368v402.648695c0 19.501107-15.865308 35.395067-35.379718 35.395067z","p-id":"2422"}),Object(a["o"])("path",{d:"M661.363521 609.60889c-4.424767-10.792789-16.766839-15.935916-27.560651-11.526498-10.792789 4.424767-15.964568 16.766839-11.538778 27.546324 5.875812 14.356957 8.861814 29.560187 8.861814 45.215718 0 65.672591-53.42978 119.101347-119.116696 119.101347-65.679754 0-119.122836-53.428756-119.122837-119.101347 0-65.68794 53.444106-119.116697 119.122837-119.116697 16.091458 0 31.674333 3.141544 46.356701 9.341744 10.736507 4.563937 23.15021-0.493233 27.700844-11.244066 4.523004-10.750833-0.506536-23.13486-11.258393-27.672191-19.908382-8.412583-41.042683-12.667482-62.799152-12.667482-88.977319 0-161.357669 72.366023-161.357669 161.359715 0 88.977319 72.379326 161.370972 161.357669 161.370972 88.979366 0 161.358692-72.393652 161.358692-161.370972 0-21.193652-4.028748-41.792765-12.004381-61.236567z","p-id":"2423"}),Object(a["o"])("path",{d:"M512.00921 612.975561c-31.955742 0-57.881153 25.897782-57.881153 57.868873 0 31.955742 25.925411 57.8525 57.881153 57.8525 31.956765 0 57.882176-25.897782 57.882176-57.8525 0.001023-31.971092-25.925411-57.868873-57.882176-57.868873z","p-id":"2424"})],-1),re={key:0,t:"1629082755184",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3877",width:"200",height:"200"},oe=Object(a["o"])("path",{d:"M628.053333 628.053333a32 32 0 0 1 45.226667 0l158.72 158.634667V693.333333l0.298667-4.352A32 32 0 0 1 896 693.333333v181.333334l-0.341333 3.84a21.333333 21.333333 0 0 1-20.992 17.493333h-181.333334l-4.352-0.298667a32 32 0 0 1-27.648-31.701333l0.298667-4.352a32 32 0 0 1 31.701333-27.648h93.44l-158.72-158.72-3.114666-3.584a32 32 0 0 1 3.114666-41.642667z m-232.106666 0a32 32 0 0 1 3.114666 41.642667l-3.114666 3.584-158.72 158.72h93.44a32 32 0 0 1 31.701333 27.648l0.298667 4.352a32 32 0 0 1-27.648 31.701333L330.666667 896H149.333333a21.333333 21.333333 0 0 1-20.992-17.493333L128 874.666667v-181.333334a32 32 0 0 1 63.701333-4.352l0.298667 4.352v93.354667l158.72-158.634667a32 32 0 0 1 45.226667 0zM874.666667 128a21.333333 21.333333 0 0 1 20.992 17.493333L896 149.333333v181.333334a32 32 0 0 1-63.701333 4.352L832 330.666667V237.312L673.28 395.946667a32 32 0 0 1-48.341333-41.642667l3.114666-3.584 158.72-158.72h-93.44a32 32 0 0 1-31.701333-27.648L661.333333 160a32 32 0 0 1 27.648-31.701333L693.333333 128h181.333334zM330.666667 128l4.352 0.298667a32 32 0 0 1 27.648 31.701333l-0.298667 4.352a32 32 0 0 1-31.701333 27.648H237.226667l158.72 158.72 3.114666 3.584a32 32 0 0 1-48.341333 41.642667L192 237.312V330.666667l-0.298667 4.352A32 32 0 0 1 128 330.666667V149.333333l0.341333-3.84A21.333333 21.333333 0 0 1 149.333333 128h181.333334z","p-id":"3878"},null,-1),se={key:1,t:"1629084013198",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2512",width:"200",height:"200"},le=Object(a["o"])("path",{d:"M749.248 704H864a32 32 0 1 0 0-64H672a32 32 0 0 0-32 32v192a32 32 0 1 0 64 0v-114.752l137.36 137.36a32 32 0 1 0 45.232-45.264L749.248 704zM320 749.248V864a32 32 0 1 0 64 0V672a32 32 0 0 0-32-32H160a32 32 0 1 0 0 64h114.752l-137.36 137.36a32 32 0 1 0 45.264 45.232L320 749.248zM749.248 320H864a32 32 0 1 1 0 64H672a32 32 0 0 1-32-32V160a32 32 0 1 1 64 0v114.752l137.36-137.36a32 32 0 1 1 45.232 45.264L749.248 320zM320 274.752V160a32 32 0 1 1 64 0v192a32 32 0 0 1-32 32H160a32 32 0 1 1 0-64h114.752l-137.36-137.36a32 32 0 1 1 45.264-45.232L320 274.752z","p-id":"2513"},null,-1);function ce(e,t,i,n,r,o){var s=this,l=Object(a["N"])("el-button"),c=Object(a["N"])("el-slider"),h=Object(a["N"])("el-card"),ce=Object(a["N"])("el-scrollbar"),he=Object(a["N"])("tree"),de=Object(a["O"])("loading");return Object(a["F"])(),Object(a["k"])("div",d,[Object(a["o"])("div",u,[Object(a["o"])("p",f,"FPS:"+Object(a["R"])(e.ctrXbim.fps),1),Object(a["o"])("p",null,"选中的prodId:"+Object(a["R"])(e.ctrXbim.selectedData&&e.ctrXbim.selectedData.id),1),Object(a["o"])("p",null,"选中的模型:"+Object(a["R"])(e.ctrXbim.selectedData&&e.ctrXbim.selectedData.model),1),Object(a["o"])("p",null,"当前选中的剖切面方向"+Object(a["R"])(e.ctrXbim.lastClickId),1)]),Object(a["o"])("div",v,[e.ctrXbim.flagClipping?(Object(a["F"])(),Object(a["k"])(h,{key:0,class:"box-card Sectioningbox"},{header:Object(a["cb"])((function(){return[Object(a["o"])("div",g,[p,Object(a["o"])(l,{type:"text",onClick:e.toggleClipping},{default:Object(a["cb"])((function(){return[m]})),_:1},8,["onClick"])])]})),default:Object(a["cb"])((function(){return[Object(a["o"])("div",b,[Object(a["o"])("div",{class:"box",title:"创建切面",onClick:t[1]||(t[1]=function(t){return e.toggleCreateClip(!0)}),disabled:e.ctrXbim.clippingPlanes.length>=2},[w],8,["disabled"]),Object(a["o"])("div",{class:"box",title:"清除切面",onClick:t[2]||(t[2]=function(){return e.resetPlane&&e.resetPlane.apply(e,arguments)})},[y]),Object(a["o"])("div",{class:"box able",title:e.ctrXbim.showClipping?"隐藏剖面":"显示剖面",onClick:t[3]||(t[3]=function(){return e.toggleClippingPlane&&e.toggleClippingPlane.apply(e,arguments)})},[k],8,["title"])]),e.ctrXbim.changeClippingPrg?(Object(a["F"])(),Object(a["k"])(c,{key:0,onInput:e.changeClipPrg,"show-tooltip":!1,class:"mgTop8",modelValue:e.progress,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.progress=t}),step:.01},null,8,["onInput","modelValue"])):Object(a["l"])("",!0)]})),_:1})):Object(a["l"])("",!0),e.Attribute_details?Object(a["db"])((Object(a["F"])(),Object(a["k"])(h,{key:1,shadow:"always","element-loading-text":"加载属性中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0)",class:"box-card"},{header:Object(a["cb"])((function(){return[Object(a["o"])("div",O,[P,Object(a["o"])(l,{type:"text",onClick:e.remove},{default:Object(a["cb"])((function(){return[C]})),_:1},8,["onClick"])])]})),default:Object(a["cb"])((function(){return[Object(a["o"])(ce,{"max-height":"500px"},{default:Object(a["cb"])((function(){return[0===Object.keys(s.detailData).length?(Object(a["F"])(),Object(a["k"])("div",_,[x,D])):Object(a["l"])("",!0),(Object(a["F"])(!0),Object(a["k"])(a["b"],null,Object(a["L"])(e.detailData,(function(e,t){return Object(a["F"])(),Object(a["k"])("tr",{class:"title",key:t},[Object(a["o"])("td",E,Object(a["R"])(t),1),Object(a["o"])("td",M,Object(a["R"])(e),1)])})),128))]})),_:1})]})),_:1},512)),[[de,e.loadingDetail]]):Object(a["l"])("",!0),e.Modeflag?(Object(a["F"])(),Object(a["k"])(h,{key:2,class:"box-card colorbox"},{header:Object(a["cb"])((function(){return[T]})),default:Object(a["cb"])((function(){return[L,A,j,S,I,R,z]})),_:1})):Object(a["l"])("",!0)]),e.ctrXbim.flagMark?(Object(a["F"])(),Object(a["k"])("div",{key:0,class:"wrap-mark",style:e.style},null,4)):Object(a["l"])("",!0),Object(a["o"])("canvas",N,null,512),U,Object(a["o"])(he,{ref:"tree",onHideItems:e.hideItems,treeList:e.dataTree,displayflag:e.flag,onSelInModel:e.selInModel,onDoLookAt:e.doLookAt,onGetDetailInfo:e.getDetailInfo},null,8,["onHideItems","treeList","displayflag","onSelInModel","onDoLookAt","onGetDetailInfo"]),e.ctrXbim.flagWalking?(Object(a["F"])(),Object(a["k"])("div",B,"长按键盘WASD进行漫游操作")):Object(a["l"])("",!0),e.loading?(Object(a["F"])(),Object(a["k"])("div",F,[X])):Object(a["l"])("",!0),Object(a["o"])("div",V,[Object(a["o"])("div",{class:"bf-button gld_mode",style:{},title:e.Modeflag?"状态模式":"默认模式",onClick:t[5]||(t[5]=function(){return e.toggleChange&&e.toggleChange.apply(e,arguments)})},[H],8,["title"]),Object(a["o"])("div",{class:"bf-button gld_measure",style:{},title:e.ctrXbim.flagMeasuring?"退出测量模式":"测量模式",onClick:t[6]||(t[6]=function(){return e.toggleMeasure&&e.toggleMeasure.apply(e,arguments)})},[Y],8,["title"]),Object(a["o"])("div",{class:"bf-button gld_Sectioning",title:e.ctrXbim.flagClipping?"退出剖切":"剖切模式",onClick:t[7]||(t[7]=function(){return e.toggleClipping&&e.toggleClipping.apply(e,arguments)})},[W],8,["title"]),Object(a["o"])("div",{class:"bf-button gld_rotate",title:e.ctrXbim.flagRotate?"停止旋转":"旋转预览",onClick:t[8]||(t[8]=function(){return e.toggleRotate&&e.toggleRotate.apply(e,arguments)})},[G],8,["title"]),Object(a["o"])("div",{class:"bf-button gld_roam",title:e.ctrXbim.flagWalking?"退出漫游":"进入漫游",onClick:t[9]||(t[9]=function(){return e.toggleWalking&&e.toggleWalking.apply(e,arguments)})},[K],8,["title"]),Object(a["o"])("div",{class:"bf-button",title:"标记",onMouseover:t[12]||(t[12]=function(){return e.Markingnter&&e.Markingnter.apply(e,arguments)}),onMouseout:t[13]||(t[13]=function(){return e.Markingout&&e.Markingout.apply(e,arguments)})},[q,Object(a["o"])("div",J,[Object(a["o"])("div",{class:"bf-button gld_sign",title:e.ctrXbim.flagMarking?"退出标记":"标记模式",onClick:t[10]||(t[10]=function(){return e.toggleMarking&&e.toggleMarking.apply(e,arguments)})},[$],8,["title"]),Object(a["o"])("div",{class:"bf-button gld_remove",title:"清空标记",onClick:t[11]||(t[11]=function(){return e.clearMarking&&e.clearMarking.apply(e,arguments)})},[Z])])],32),Object(a["o"])("div",{class:"bf-button gld_details",title:e.Attribute_details?"退出详情":"信息详情",onClick:t[14]||(t[14]=function(){return e.toggleDetails&&e.toggleDetails.apply(e,arguments)})},[Q],8,["title"]),Object(a["o"])("div",{class:"bf-button gld_flag",title:e.flag?"隐藏选中":"显示选中",onClick:t[15]||(t[15]=function(){return e.toggleflag&&e.toggleflag.apply(e,arguments)})},[!1===e.flag?(Object(a["F"])(),Object(a["k"])("svg",ee,[te])):(Object(a["F"])(),Object(a["k"])("svg",ie,[ae]))],8,["title"]),Object(a["o"])("div",{class:"bf-button gld_details",title:e.camera?"透视相机":"正交相机",onClick:t[16]||(t[16]=function(){return e.cameraChange&&e.cameraChange.apply(e,arguments)})},[ne],8,["title"]),Object(a["o"])("div",{class:"bf-button gld_details",title:e.isFullscreen?"退出全屏":"全屏",onClick:t[17]||(t[17]=function(){return e.isScreenFull&&e.isScreenFull.apply(e,arguments)})},[e.isFullscreen?(Object(a["F"])(),Object(a["k"])("svg",se,[le])):(Object(a["F"])(),Object(a["k"])("svg",re,[oe]))],8,["title"])])])}var he=i("5530"),de=i("1da1"),ue=i("d4ec"),fe=i("bee2"),ve=i("262e"),ge=i("2caf"),pe=(i("96cf"),i("caad"),i("2532"),i("99af"),i("159b"),i("ac1f"),i("1276"),i("7db0"),i("9ab4")),me=(i("6c8c"),i("80de"),i("85f8"),i("ce1f")),be=i("bc3a"),we=i.n(be),ye=i("5502"),ke=(i("b0c0"),i("4de4"),i("3517")),Oe=i("20e7"),Pe=i("3835"),Ce=(i("cfc3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),"\n  attribute vec3 coordinates;\n  uniform mediump float uColorCoding; \n  uniform float prodId; \n\n  uniform mat4 uMvMatrix;\n  uniform mat4 uPMatrix;\n  varying vec4 vIdColor;\n\n  vec4 getIdColor(){\n    float product = floor(prodId + 0.5);\n    float B = floor(product / (256.0*256.0));\n    float G = floor((product - B * 256.0*256.0) / 256.0);\n    float R = mod(product, 256.0);\n    return vec4(R / 255.0, G / 255.0, B / 255.0, 1.0);\n }\n\n  void main(void) {\n    if (uColorCoding == 1.0)\n  {\n    vIdColor = getIdColor();\n  }else{\n   vIdColor = vec4(0.0, 255.0, 0.0, 0.2);\n  }\n\n   gl_Position = uPMatrix * uMvMatrix * vec4(coordinates, 1.0);\n  }"),_e=function(){function e(){Object(ue["a"])(this,e),this.initialized=!1,this._modelId=100000001,this.factor=1.5,this.zFactor=5,this.numberOfLines=10,this.colour=Oe["c"].fromValues(200,0,0,1),this._stopped=!1,this.boxData=[]}return Object(fe["a"])(e,[{key:"stopped",get:function(){return this._stopped},set:function(e){this._stopped=e,this.viewer&&this.viewer.draw()}},{key:"init",value:function(e){this.viewer=e;var t=e.gl;this._initShader(),t.useProgram(this.program),this.vertex_buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertex_buffer),this.coordinatesAttributePointer=t.getAttribLocation(this.program,"coordinates"),t.enableVertexAttribArray(this.coordinatesAttributePointer),t.vertexAttribPointer(this.coordinatesAttributePointer,3,t.FLOAT,!1,0,0),this._colourCodingUniformPointer=t.getUniformLocation(this.program,"uColorCoding"),t.enableVertexAttribArray(this._colourCodingUniformPointer),this._prodId=t.getUniformLocation(this.program,"prodId"),t.enableVertexAttribArray(this._prodId),this.colourUniformPointer=t.getUniformLocation(this.program,"uColour"),this.pUniformPointer=t.getUniformLocation(this.program,"uPMatrix"),this.mvUniformPointer=t.getUniformLocation(this.program,"uMvMatrix"),this.initialized=!0}},{key:"getClickPanel",value:function(e,t){this.stopped=!1,this.selectedBox=e,this.doDraw();var i=this.checkSelMian(t);return this.selectedPanelId=i,this.stopped=!0,this.boxData.find((function(e){return e.id==i}))}},{key:"checkSelMian",value:function(e){var t=this.viewer;if(this.stopped)return 0;var i=e.clientX,a=e.clientY,n=t.canvas.getBoundingClientRect(),r=(n.left,t.height,n.top,this.getId(e)),o=this.boxData.find((function(e){return e.id==r}));return o&&(o.plane1=this.getPoints1(r)),r}},{key:"getId",value:function(e){var t=e.clientX,i=e.clientY,a=this.viewer.canvas.getBoundingClientRect(),n=t-a.left,r=this.viewer.height-(i-a.top),o=this.viewer.gl,s=new ke["Framebuffer"](o,this.viewer.width,this.viewer.height,!1,this.viewer.glVersion);o.viewport(0,0,this.viewer.width,this.viewer.height),o.enable(o.DEPTH_TEST),o.disable(o.BLEND),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),this.onAfterDrawId();var l=s.getId(n,r);s.getXYZ(n,r);return s.delete(),l}},{key:"_initShader",value:function(){var e=this.viewer.gl,t=this.viewer,i=function(i,a){if(e.shaderSource(i,a),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){var n=e.getShaderInfoLog(i);return t.error(n),null}},a="precision mediump float; uniform vec4 uColour;\n      varying vec4 vIdColor;\n      void main(void) {\n      gl_FragColor = vIdColor;\n      }",n=e.createShader(e.FRAGMENT_SHADER);i(n,a);var r=e.createShader(e.VERTEX_SHADER);i(r,Ce),this.program=e.createProgram(),e.attachShader(this.program,r),e.attachShader(this.program,n),e.linkProgram(this.program),e.getProgramParameter(this.program,e.LINK_STATUS)||t.error("Could not initialise shaders for a navigation cube plugin")}},{key:"getPoints1",value:function(e){if(this.selectedBox){var t=this.selectedBox,i=this.viewer.getTargetBoundingBox(),a=Math.max(i[3],i[4],i[5]),n=a+400,r={x:t[0],y:t[1],z:t[2]},o={x:t[3],y:t[4],z:t[5]};1==e||2==e?(r.x-=n,r.y-=n,o.x+=2*n,o.y+=2*n):3==e||4==e?(r.z-=n,r.y-=n,o.z+=2*n,o.y+=2*n):5!=e&&6!=e||(r.x-=n,r.z-=n,o.x+=2*n,o.z+=2*n);var s=[r.x,r.y,r.z],l=[r.x+o.x,r.y,r.z],c=[r.x+o.x,r.y+o.y,r.z],h=[r.x,r.y+o.y,r.z],d=[r.x,r.y,r.z+o.z],u=[r.x+o.x,r.y,r.z+o.z],f=[r.x+o.x,r.y+o.y,r.z+o.z],v=[r.x,r.y+o.y,r.z+o.z];switch(e){case 1:return[s,l,h,c];case 2:return[d,u,v,f];case 3:return[s,d,h,v];case 4:return[l,u,c,f];case 5:return[c,f,h,v];case 6:return[d,u,s,l]}}}},{key:"getPoints",value:function(e){var t=0,i={x:e[0]-t,y:e[1]-t,z:e[2]-t},a={x:e[3]+2*t,y:e[4]+2*t,z:e[5]+2*t},n=[i.x,i.y,i.z],r=[i.x+a.x,i.y,i.z],o=[i.x+a.x,i.y+a.y,i.z],s=[i.x,i.y+a.y,i.z],l=[i.x,i.y,i.z+a.z],c=[i.x+a.x,i.y,i.z+a.z],h=[i.x+a.x,i.y+a.y,i.z+a.z],d=[i.x,i.y+a.y,i.z+a.z];return[n,r,o,s,l,c,h,d]}},{key:"doDraw",value:function(){var e=this;if(this.initialized&&!this.stopped&&this.selectedBox){var t=this.getPoints(this.selectedBox),i=Object(Pe["a"])(t,8),a=i[0],n=i[1],r=i[2],o=i[3],s=i[4],l=i[5],c=i[6],h=i[7],d=this.getPoints(this.selectedBox),u=Object(Pe["a"])(d,8),f=u[0],v=u[1],g=u[2],p=u[3],m=u[4],b=u[5],w=u[6],y=u[7],k=function(e,t){e.forEach((function(e){t.push(e)}))};this.boxData=[{plane:[a,n,o,r],plane1:[f,v,p,g],faxian:[a,s],id:1},{plane:[s,l,h,c],plane1:[m,b,y,w],faxian:[s,a],id:2},{id:3,plane:[a,s,o,h],plane1:[f,m,p,y],faxian:[s,l]},{id:4,plane:[n,l,r,c],plane1:[v,b,g,w],faxian:[n,a]},{id:5,plane:[r,c,o,h],plane1:[g,w,p,y],faxian:[h,s]},{id:6,plane:[s,l,a,n],plane1:[m,b,f,v],faxian:[s,h]}],this.boxData.forEach((function(t){var i=[];t.plane.forEach((function(e){k(e,i)})),e.drawPlane(i,t.id,t.id2)}))}}},{key:"drawPlane",value:function(e,t,i){var a=this.setActive();a.uniformMatrix4fv(this.pUniformPointer,!1,this.viewer.pMatrix),a.uniformMatrix4fv(this.mvUniformPointer,!1,this.viewer.mvMatrix),a.uniform4fv(this.colourUniformPointer,this.colour),a.bindBuffer(a.ARRAY_BUFFER,this.vertex_buffer),a.bufferData(a.ARRAY_BUFFER,new Float32Array(e),a.STATIC_DRAW),a.vertexAttribPointer(this.coordinatesAttributePointer,3,a.FLOAT,!1,0,0),a.uniform1f(this._prodId,t),a.enable(a.BLEND),a.enable(a.DEPTH_TEST),a.drawArrays(a.TRIANGLE_STRIP,0,e.length/3)}},{key:"onBeforeDraw",value:function(e,t){}},{key:"onBeforeDrawId",value:function(){}},{key:"setActive",value:function(){var e=this.viewer.gl;return e.useProgram(this.program),e}},{key:"onAfterDraw",value:function(e,t){if(!this.stopped){var i=this.setActive();i.disable(i.BLEND),i.disable(i.DEPTH_TEST),i.uniform1f(this._colourCodingUniformPointer,0),this.doDraw()}}},{key:"onAfterDrawId",value:function(){if(!this.stopped){var e=this.setActive();e.uniform1f(this._colourCodingUniformPointer,1),this.doDraw()}}},{key:"onAfterDrawModelId",value:function(){if(!this.stopped){var e=this.setActive();e.uniform1f(this._colourCodingUniformPointer,this._modelId),this.doDraw()}}}]),e}(),xe="attribute vec3 coordinates;\r\n\r\n\r\nuniform mat4 uMvMatrix;\r\nuniform mat4 uPMatrix;\r\n\r\nvoid main(void) {\r\n gl_Position = uPMatrix * uMvMatrix * vec4(coordinates, 1.0);\r\n}",De=(i("5cc6"),i("84c3"),function(){function e(t){Object(ue["a"])(this,e),this._stopped=!1,this.position=Oe["b"].fromValues(-5415.40478515625,647.7828369140625,5741.4638671875),this.flagInited=!1,this.viewer=t,this.init()}return Object(fe["a"])(e,[{key:"stopped",get:function(){return this._stopped},set:function(e){this._stopped=e,this.viewer&&this.viewer.draw()}},{key:"init",value:function(){this.buffers=this.initBuffers(),this.main(),this.flagInited=!0}},{key:"renderText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.querySelector("#canvas");t||(t=document.createElement("canvas"),t.id="canvas",document.body.appendChild(t));var i=1,a=20,n=e,r=t.getContext("2d"),o=r.measureText(n).width;function s(e,t){for(var i=0,a=e.height;i<a;i++)for(var n=0,r=e.width;n<r;n++)t.data[i*r*4+4*n+0]=e.data[i*r*4+4*(r-n)+0],t.data[i*r*4+4*n+1]=e.data[i*r*4+4*(r-n)+1],t.data[i*r*4+4*n+2]=e.data[i*r*4+4*(r-n)+2],t.data[i*r*4+4*n+3]=e.data[i*r*4+4*(r-n)+3];return t}r.globalAlpha=0,r.fillStyle="rgba(255, 255, 255, 0)",t.width=o*i,t.height=o*i,r.textBaseline="middle",r.font=a*i+'px "微软雅黑"',r.fillText(n,0,t.height/2);var l=r.getImageData(0,0,t.width,t.height),c=r.getImageData(0,0,t.width,t.height);r.putImageData(s(c,l),0,0),this.loadTexture(t.toDataURL("image/png"))}},{key:"loadTexture",value:function(e){var t=this,i=this.viewer.gl,a=i.createTexture();i.bindTexture(i.TEXTURE_2D,a);var n=0,r=i.RGBA,o=1,s=1,l=0,c=i.RGBA,h=i.UNSIGNED_BYTE,d=new Uint8Array([0,0,255,255]);i.texImage2D(i.TEXTURE_2D,n,r,o,s,l,c,h,d);var u=new Image;return u.onload=function(){i.bindTexture(i.TEXTURE_2D,a),i.texImage2D(i.TEXTURE_2D,n,r,c,h,u),t.isPowerOf2(u.width)&&t.isPowerOf2(u.height)?i.generateMipmap(i.TEXTURE_2D):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR)),t.texture=a},u.src=e,a}},{key:"isPowerOf2",value:function(e){return 0==(e&e-1)}},{key:"onAfterDraw",value:function(){this.drawScene()}},{key:"onBeforeDraw",value:function(){}},{key:"onBeforeDrawId",value:function(){}},{key:"onAfterDrawId",value:function(){}},{key:"onAfterDrawModelId",value:function(){}},{key:"main",value:function(){var e=this.viewer.gl;if(e){var t="\n    attribute vec4 aVertexPosition;\n    attribute vec2 aTextureCoord;\n\n    uniform mat4 uMVMatrix;\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    varying highp vec2 vTextureCoord;\n\n    void main(void) {\n\n      gl_Position = uProjectionMatrix  * uMVMatrix* uModelViewMatrix * aVertexPosition;\n      vTextureCoord = aTextureCoord;\n    }\n  ",i="\n    varying highp vec2 vTextureCoord;\n\n    uniform sampler2D uSampler;\n\n    void main(void) {\n      gl_FragColor = texture2D(uSampler, vTextureCoord);\n    }\n  ",a=this.initShaderProgram(e,t,i);this.program={program:a,attribLocations:{vertexPosition:e.getAttribLocation(a,"aVertexPosition"),textureCoord:e.getAttribLocation(a,"aTextureCoord")},uniformLocations:{mvMatrix:e.getUniformLocation(a,"uMVMatrix"),projectionMatrix:e.getUniformLocation(a,"uProjectionMatrix"),modelViewMatrix:e.getUniformLocation(a,"uModelViewMatrix"),uSampler:e.getUniformLocation(a,"uSampler")}}}else alert("Unable to initialize WebGL. Your browser or machine may not support it.")}},{key:"initBuffers",value:function(){var e=this.viewer.gl,t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t);var i=500,a=.1,n=[-i,-a,i,i,-a,i,i,a,i,-i,a,i,-i,-a,-i,-i,a,-i,i,a,-i,i,-a,-i,-i,a,-i,-i,a,i,i,a,i,i,a,-i,-i,-a,-i,i,-a,-i,i,-a,i,-i,-a,i,i,-a,-i,i,a,-i,i,a,i,i,-a,i,-i,-a,-i,-i,-a,i,-i,a,i,-i,a,-i];e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW);var r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1];e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW);var s=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,s);var l=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];return e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(l),e.STATIC_DRAW),{position:t,textureCoord:r,indices:s}}},{key:"getMatrix",value:function(){var e=Oe["a"].create(),t=this.position;return Oe["a"].translate(e,e,t),e}},{key:"drawScene",value:function(){if(!this.stopped&&this.texture){var e=this.viewer.gl,t=this.program,i=this.buffers,a=this.texture;e.enable(e.DEPTH_TEST);var n=this.getMatrix(),r=3,o=e.FLOAT,s=!1,l=0,c=0;e.bindBuffer(e.ARRAY_BUFFER,i.position),e.vertexAttribPointer(t.attribLocations.vertexPosition,r,o,s,l,c),e.enableVertexAttribArray(t.attribLocations.vertexPosition);var h=2,d=e.FLOAT,u=!1,f=0,v=0;e.bindBuffer(e.ARRAY_BUFFER,i.textureCoord),e.vertexAttribPointer(t.attribLocations.textureCoord,h,d,u,f,v),e.enableVertexAttribArray(t.attribLocations.textureCoord),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i.indices),e.useProgram(t.program),e.uniformMatrix4fv(t.uniformLocations.mvMatrix,!1,this.viewer.mvMatrix),e.uniformMatrix4fv(t.uniformLocations.projectionMatrix,!1,this.viewer.pMatrix),e.uniformMatrix4fv(t.uniformLocations.modelViewMatrix,!1,n),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a),e.uniform1i(t.uniformLocations.uSampler,0);var g=36,p=e.UNSIGNED_SHORT,m=0;e.drawElements(e.TRIANGLES,g,p,m)}}},{key:"initShaderProgram",value:function(e,t,i){var a=this.loadShader(e,e.VERTEX_SHADER,t),n=this.loadShader(e,e.FRAGMENT_SHADER,i),r=e.createProgram();return e.attachShader(r,a),e.attachShader(r,n),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)?r:(alert("Unable to initialize the shader program: "+e.getProgramInfoLog(r)),null)}},{key:"loadShader",value:function(e,t,i){var a=e.createShader(t);return e.shaderSource(a,i),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS)?a:(alert("An error occurred compiling the shaders: "+e.getShaderInfoLog(a)),e.deleteShader(a),null)}}]),e}()),Ee=function(){function e(){Object(ue["a"])(this,e),this.initialized=!1,this.colour=[.7,0,.7,.8],this._stopped=!1,this.points=[],this.listText=[]}return Object(fe["a"])(e,[{key:"stopped",get:function(){return this._stopped},set:function(e){this._stopped=e,this.viewer&&this.viewer.draw()}},{key:"init",value:function(e){this.viewer=e;var t=e.gl;this._initShader(),t.useProgram(this.program),this.vertex_buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertex_buffer),this.coordinatesAttributePointer=t.getAttribLocation(this.program,"coordinates"),t.vertexAttribPointer(this.coordinatesAttributePointer,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(this.coordinatesAttributePointer),this.colourUniformPointer=t.getUniformLocation(this.program,"uColour"),this.pUniformPointer=t.getUniformLocation(this.program,"uPMatrix"),this.mvUniformPointer=t.getUniformLocation(this.program,"uMvMatrix"),this.initialized=!0}},{key:"_initShader",value:function(){var e=this.viewer.gl,t=this.viewer,i=function(i,a){if(e.shaderSource(i,a),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){var n=e.getShaderInfoLog(i);return t.error(n),null}},a="precision mediump float; uniform vec4 uColour;void main(void) {gl_FragColor = uColour;}",n=e.createShader(e.FRAGMENT_SHADER);i(n,a);var r=e.createShader(e.VERTEX_SHADER);i(r,xe),this.program=e.createProgram(),e.attachShader(this.program,r),e.attachShader(this.program,n),e.linkProgram(this.program),e.getProgramParameter(this.program,e.LINK_STATUS)||t.error("Could not initialise shaders for a navigation cube plugin")}},{key:"onAfterDraw",value:function(e,t){this.doDraw()}},{key:"drawWithgl",value:function(e){var t=this.viewer.gl;t.useProgram(this.program),t.uniformMatrix4fv(this.pUniformPointer,!1,this.viewer.pMatrix),t.uniformMatrix4fv(this.mvUniformPointer,!1,this.viewer.mvMatrix),t.uniform4fv(this.colourUniformPointer,this.colour),t.bindBuffer(t.ARRAY_BUFFER,this.vertex_buffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertex_buffer),t.vertexAttribPointer(this.coordinatesAttributePointer,3,t.FLOAT,!1,0,0),t.enable(t.BLEND),t.enable(t.DEPTH_TEST),t.blendFunc(t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.drawArrays(t.TRIANGLE_STRIP,0,e.length/3)}},{key:"clearAll",value:function(){this.listText.forEach((function(e){e.stopped=!0})),this.listText=[]}},{key:"drawPoint",value:function(e){var t=this,i=[],a=100,n={x:e[0]-a/2,y:e[1]-a/2,z:e[2]-a/2},r=[n.x,n.y,n.z],o=[n.x+a,n.y,n.z],s=[n.x+a,n.y+a,n.z],l=[n.x,n.y+a,n.z],c=[n.x,n.y,n.z+a],h=[n.x+a,n.y,n.z+a],d=[n.x+a,n.y+a,n.z+a],u=[n.x,n.y+a,n.z+a];[r,o,s,h,d,c,u,r,l,s,u,d,c,h,r,o].forEach((function(e){t.funcAddPoint(i,e)})),this.drawWithgl(i)}},{key:"funcAddPoint",value:function(e,t){t.forEach((function(t){e.push(t)}))}},{key:"drawLineBetween",value:function(e,t){var i=this,a=[],n=10,r=[e[0],e[1],e[2]],o=[e[0]+n,e[1],e[2]],s=[e[0]+n,e[1]+n,e[2]],l=[e[0],e[1]+n,e[2]],c=[t[0],t[1],t[2]],h=[t[0]+n,t[1],t[2]],d=[t[0]+n,t[1]+n,t[2]],u=[t[0],t[1]+n,t[2]];[r,o,s,h,d,c,u,r,l,s,u,d,c,h,r,o].forEach((function(e){i.funcAddPoint(a,e)})),this.drawWithgl(a)}},{key:"onBeforeDraw",value:function(e,t){}},{key:"doDraw",value:function(){var e=this;this.initialized&&!this.stopped&&this.points.forEach((function(t,i){if(e.drawPoint(t),i%2==1){var a=e.points[i-1];e.drawLineBetween(a,t);var n=Oe["b"].fromValues(a[0],a[1],a[2]),r=Oe["b"].fromValues(t[0],t[1],t[2]),o=Oe["b"].distance(n,r),s=e.listText[i];e.listText[i]||(s=new De(e.viewer),e.viewer.addPlugin(s),e.listText[i]=s,s.init(),s.renderText(""+o),s.position=Oe["b"].fromValues((n[0]+r[0])/2,(n[1]+r[1])/2,(n[2]+r[2])/2))}}))}},{key:"drawTxt",value:function(e,t,i){}},{key:"onBeforeDrawId",value:function(){}},{key:"onAfterDrawId",value:function(){}},{key:"onAfterDrawModelId",value:function(){}}]),e}(),Me="\n  attribute vec3 coordinates;\n  uniform mediump float uColorCoding; \n  uniform float prodId; \n\n  uniform mat4 uMvMatrix;\n  uniform mat4 uPMatrix;\n  varying vec4 vIdColor;\n\n  vec4 getIdColor(){\n    float product = floor(prodId + 0.5);\n    float B = floor(product / (256.0*256.0));\n    float G = floor((product - B * 256.0*256.0) / 256.0);\n    float R = mod(product, 256.0);\n    return vec4(R / 255.0, G / 255.0, B / 255.0, 1.0);\n }\n\n  void main(void) {\n    if (uColorCoding == 1.0)\n  {\n    vIdColor = getIdColor();\n  } else if (uColorCoding == 2.0){\n   vIdColor = vec4(255.0, 255.0, 0.0, 0.3);\n  } else{\n   vIdColor = vec4(0.0, 255.0, 0.0, 0.0);\n  }\n\n   gl_Position = uPMatrix * uMvMatrix * vec4(coordinates, 1.0);\n  }",Te="\n  attribute vec3 coordinates;\n  uniform mediump float uColorCoding; \n  uniform float prodId; \n\n  uniform mat4 uMvMatrix;\n  uniform mat4 uPMatrix;\n  varying vec4 vIdColor;\n\n  vec4 getIdColor(){\n    float product = floor(prodId + 0.5);\n    float B = floor(product / (256.0*256.0));\n    float G = floor((product - B * 256.0*256.0) / 256.0);\n    float R = mod(product, 256.0);\n    return vec4(R / 255.0, G / 255.0, B / 255.0, 1.0);\n }\n\n  void main(void) {\n    if (uColorCoding == 1.0)\n  {\n    vIdColor = getIdColor();\n  } else if (uColorCoding == 2.0){\n   vIdColor = vec4(255.0, 255.0, 0.0, 1.0);\n  } else{\n   vIdColor = vec4(0.0, 255.0, 0.0, 1.0);\n  }\n\n   gl_Position = uPMatrix * uMvMatrix * vec4(coordinates, 1.0);\n  }",Le=function(){function e(){Object(ue["a"])(this,e),this.initialized=!1,this._modelId=0,this.factor=1.5,this.zFactor=5,this.numberOfLines=10,this.colour=Oe["c"].fromValues(200,0,0,1),this._stopped=!1,this.pointes=[],this.id=1e3}return Object(fe["a"])(e,[{key:"stopped",get:function(){return this._stopped},set:function(e){this._stopped=e,this.viewer&&this.viewer.draw()}},{key:"init",value:function(e){this.viewer=e;var t=e.gl;this._initShader(),t.useProgram(this.program),this.vertex_buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertex_buffer),this.coordinatesAttributePointer=t.getAttribLocation(this.program,"coordinates"),t.enableVertexAttribArray(this.coordinatesAttributePointer),t.vertexAttribPointer(this.coordinatesAttributePointer,3,t.FLOAT,!1,0,0),this._colourCodingUniformPointer=t.getUniformLocation(this.program,"uColorCoding"),t.enableVertexAttribArray(this._colourCodingUniformPointer),this._prodId=t.getUniformLocation(this.program,"prodId"),t.enableVertexAttribArray(this._prodId),this.colourUniformPointer=t.getUniformLocation(this.program,"uColour"),this.pUniformPointer=t.getUniformLocation(this.program,"uPMatrix"),this.mvUniformPointer=t.getUniformLocation(this.program,"uMvMatrix"),this.initialized=!0}},{key:"doMove",value:function(e,t,i){var a=this,n=0,r=this.viewer.getCameraPosition(),o=Oe["b"].distance(r,i),s=(this.viewer.canvas.width=this.viewer.canvas.offsetWidth,this.viewer.canvas.height=this.viewer.canvas.offsetHeight),l=this.viewer.cameraProperties.fov*Math.PI/180,c=2*o*Math.tan(l/2);n=c/s;var h=n*Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),d=0,u=0,f=0;d=e>0?h:-h,u=t>0?h:-h,f=(t>0?1:-1)*h;var v=Oe["b"].fromValues(d,u,-f);console.log(n);var g=0,p=0,m=0;this.pointes.forEach((function(e){var t=Oe["b"].fromValues(e[0],e[1],e[2]);Oe["b"].add(t,t,v),g=t[0]-e[0],p=-(t[1]-e[1]),m=t[2]-e[2],3==a.dirId||4==a.dirId?(p=0,m=0):1==a.dirId||2==a.dirId?(g=0,p=0):5!=a.dirId&&6!=a.dirId||(g=0,m=0),e[0]+=g,e[1]+=p,e[2]+=m,console.log(g,p,m,a.dirId)})),this.doOnChangePos(g,p,m),this.doDraw()}},{key:"doOnChangePos",value:function(e,t,i){}},{key:"_initShader",value:function(){var e=this.viewer.gl,t=this.viewer,i=function(i,a){if(e.shaderSource(i,a),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){var n=e.getShaderInfoLog(i);return t.error(n),null}},a="precision mediump float; uniform vec4 uColour;\n      varying vec4 vIdColor;\n      void main(void) {\n      gl_FragColor = vIdColor;\n      }",n=e.createShader(e.FRAGMENT_SHADER);i(n,a);var r=e.createShader(e.VERTEX_SHADER);i(r,Te),this.program=e.createProgram(),e.attachShader(this.program,r),e.attachShader(this.program,n),e.linkProgram(this.program),e.getProgramParameter(this.program,e.LINK_STATUS)||t.error("Could not initialise shaders for a navigation cube plugin")}},{key:"getPoints",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,i={x:t[0]-e,y:t[1]-e,z:t[2]-e},a={x:t[3]+2*e,y:t[4]+2*e,z:t[5]+2*e},n=[i.x,i.y,i.z],r=[i.x+a.x,i.y,i.z],o=[i.x+a.x,i.y+a.y,i.z],s=[i.x,i.y+a.y,i.z],l=[i.x,i.y,i.z+a.z],c=[i.x+a.x,i.y,i.z+a.z],h=[i.x+a.x,i.y+a.y,i.z+a.z],d=[i.x,i.y+a.y,i.z+a.z];return[n,r,o,s,l,c,h,d]}},{key:"doDraw",value:function(){if(this.initialized&&!this.stopped&&0!=this.pointes.length){var e=function(e,t){e.forEach((function(e){t.push(e)}))},t=[];this.pointes.forEach((function(i){e(i,t)})),this.drawPlane(t)}}},{key:"drawPlane",value:function(e){var t=this.setActive();t.uniformMatrix4fv(this.pUniformPointer,!1,this.viewer.pMatrix),t.uniformMatrix4fv(this.mvUniformPointer,!1,this.viewer.mvMatrix),t.uniform4fv(this.colourUniformPointer,this.colour),t.bindBuffer(t.ARRAY_BUFFER,this.vertex_buffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.vertexAttribPointer(this.coordinatesAttributePointer,3,t.FLOAT,!1,0,0),t.uniform1f(this._prodId,this.id),t.enable(t.BLEND),t.drawArrays(t.LINE_STRIP,0,e.length/3)}},{key:"onBeforeDraw",value:function(e,t){}},{key:"onBeforeDrawId",value:function(){}},{key:"setActive",value:function(){var e=this.viewer.gl;return e.useProgram(this.program),e}},{key:"toggleSelected",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.setActive();this._modelId=e?2:0,t.uniform1f(this._colourCodingUniformPointer,this._modelId)}},{key:"onAfterDraw",value:function(e,t){if(!this.stopped){var i=this.setActive();i.disable(i.BLEND),i.enable(i.DEPTH_TEST),i.uniform1f(this._colourCodingUniformPointer,this._modelId),this.doDraw()}}},{key:"onAfterDrawId",value:function(){if(!this.stopped){var e=this.setActive();e.uniform1f(this._colourCodingUniformPointer,1),this.doDraw()}}},{key:"onAfterDrawModelId",value:function(){if(!this.stopped){var e=this.setActive();e.uniform1f(this._colourCodingUniformPointer,this._modelId),this.doDraw()}}},{key:"checkSelMian",value:function(e){var t=this.viewer;if(this.stopped||t.plugins.indexOf(this)<0)return 0;var i=this.getId(e);return i}},{key:"getId",value:function(e){var t=e.clientX,i=e.clientY,a=this.viewer.canvas.getBoundingClientRect(),n=t-a.left,r=this.viewer.height-(i-a.top),o=this.viewer.gl,s=new ke["Framebuffer"](o,this.viewer.width,this.viewer.height,!1,this.viewer.glVersion);o.viewport(0,0,this.viewer.width,this.viewer.height),o.disable(o.BLEND),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),this.onAfterDrawId();var l=s.getId(n,r);return s.delete(),l}}]),e}();window["vec3"]=Oe["b"],window["mat4"]=Oe["a"];var Ae,je=function(){function e(){Object(ue["a"])(this,e),this.initialized=!1,this._modelId=0,this.factor=1.5,this.zFactor=5,this.numberOfLines=10,this.colour=Oe["c"].fromValues(200,0,0,1),this._stopped=!1,this.lastPrg=50,this.pointes=[],this.faxian=[],this.pointesBack=[],this.id=1e3,this.flagSelected=!1}return Object(fe["a"])(e,[{key:"stopped",get:function(){return this._stopped},set:function(e){this._stopped=e,this.lineDrawer&&(this.lineDrawer.stopped=e),this.viewer&&this.viewer.draw()}},{key:"init",value:function(e){this.viewer=e;var t=e.gl;this._initShader(),t.useProgram(this.program),this.vertex_buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertex_buffer),this.coordinatesAttributePointer=t.getAttribLocation(this.program,"coordinates"),t.enableVertexAttribArray(this.coordinatesAttributePointer),t.vertexAttribPointer(this.coordinatesAttributePointer,3,t.FLOAT,!1,0,0),this._colourCodingUniformPointer=t.getUniformLocation(this.program,"uColorCoding"),t.enableVertexAttribArray(this._colourCodingUniformPointer),this._prodId=t.getUniformLocation(this.program,"prodId"),t.enableVertexAttribArray(this._prodId),this.colourUniformPointer=t.getUniformLocation(this.program,"uColour"),this.pUniformPointer=t.getUniformLocation(this.program,"uPMatrix"),this.mvUniformPointer=t.getUniformLocation(this.program,"uMvMatrix"),this.initialized=!0}},{key:"doMoveByPrg",value:function(e){var t=this;this.lastPrg=e;var i=this.viewer.getTargetBoundingBox(),a=Math.abs(i[3]),n=Math.abs(i[4]),r=Math.abs(i[5]);e-=50;var o=Oe["b"].create();switch(this.dirId){case 3:var s=2*a,l=e/100*s;o[0]+=l;break;case 4:var c=2*a,h=e/100*c;o[0]+=h;break;case 1:var d=2*r,u=e/100*d;o[2]+=u;break;case 2:var f=2*r,v=e/100*f;o[2]+=v;break;case 5:var g=2*n,p=e/100*g;o[1]-=p;break;case 6:var m=2*n,b=e/100*m;o[1]-=b;break}this.pointesBack.forEach((function(e,i){var a=Oe["b"].fromValues(e[0],e[1],e[2]);Oe["b"].add(a,a,o);var n=t.pointes[i];n[0]=a[0],n[1]=a[1],n[2]=a[2]}));var w=[];this.faxian.forEach((function(e,t){var i=Oe["b"].fromValues(e[0],e[1],e[2]);Oe["b"].add(i,i,o),w[t]=[],w[t][0]=i[0],w[t][1]=i[1],w[t][2]=i[2]})),this.doOnChangePos(this.pointes,w),this.doDraw()}},{key:"doMove1",value:function(e,t,i){var a=this.getId(e,t);a.xyz}},{key:"doOnChangePos",value:function(e,t){}},{key:"_initShader",value:function(){var e=this.viewer.gl,t=this.viewer,i=function(i,a){if(e.shaderSource(i,a),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){var n=e.getShaderInfoLog(i);return t.error(n),null}},a="precision mediump float; uniform vec4 uColour;\n      varying vec4 vIdColor;\n      void main(void) {\n      gl_FragColor = vIdColor;\n      }",n=e.createShader(e.FRAGMENT_SHADER);i(n,a);var r=e.createShader(e.VERTEX_SHADER);i(r,Me),this.program=e.createProgram(),e.attachShader(this.program,r),e.attachShader(this.program,n),e.linkProgram(this.program),e.getProgramParameter(this.program,e.LINK_STATUS)||t.error("Could not initialise shaders for a navigation cube plugin")}},{key:"getPoints",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,i={x:t[0]-e,y:t[1]-e,z:t[2]-e},a={x:t[3]+2*e,y:t[4]+2*e,z:t[5]+2*e},n=[i.x,i.y,i.z],r=[i.x+a.x,i.y,i.z],o=[i.x+a.x,i.y+a.y,i.z],s=[i.x,i.y+a.y,i.z],l=[i.x,i.y,i.z+a.z],c=[i.x+a.x,i.y,i.z+a.z],h=[i.x+a.x,i.y+a.y,i.z+a.z],d=[i.x,i.y+a.y,i.z+a.z];return[n,r,o,s,l,c,h,d]}},{key:"doDraw",value:function(){if(this.initialized&&!this.stopped&&0!=this.pointes.length){var e=function(e,t){e.forEach((function(e){t.push(e)}))},t=[];this.pointes.forEach((function(i){e(i,t)})),this.drawPlane(t),this.lineDrawer||(this.lineDrawer=new Le,this.lineDrawer.colour=Oe["c"].fromValues(0,0,0,1),this.viewer.addPlugin(this.lineDrawer)),this.lineDrawer.pointes=[this.pointes[0],this.pointes[1],this.pointes[3],this.pointes[2],this.pointes[0]]}}},{key:"drawPlane",value:function(e){var t=this.setActive();t.uniformMatrix4fv(this.pUniformPointer,!1,this.viewer.pMatrix),t.uniformMatrix4fv(this.mvUniformPointer,!1,this.viewer.mvMatrix),t.uniform4fv(this.colourUniformPointer,this.colour),t.bindBuffer(t.ARRAY_BUFFER,this.vertex_buffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.vertexAttribPointer(this.coordinatesAttributePointer,3,t.FLOAT,!1,0,0),t.uniform1f(this._prodId,this.id),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.drawArrays(t.TRIANGLE_STRIP,0,e.length/3)}},{key:"onBeforeDraw",value:function(e,t){}},{key:"onBeforeDrawId",value:function(){}},{key:"setActive",value:function(){var e=this.viewer.gl;return e.useProgram(this.program),e}},{key:"beforeDestroy",value:function(){this.lineDrawer&&this.viewer.removePlugin(this.lineDrawer)}},{key:"toggleSelected",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.setActive();this._modelId=e?2:0,this.flagSelected=e,t.uniform1f(this._colourCodingUniformPointer,this._modelId)}},{key:"onAfterDraw",value:function(e,t){if(!this.stopped){var i=this.setActive();i.disable(i.BLEND),i.enable(i.DEPTH_TEST),i.uniform1f(this._colourCodingUniformPointer,this._modelId),this.doDraw()}}},{key:"onAfterDrawId",value:function(){if(!this.stopped){var e=this.setActive();e.uniform1f(this._colourCodingUniformPointer,1),this.doDraw()}}},{key:"onAfterDrawModelId",value:function(){if(!this.stopped){var e=this.setActive();e.uniform1f(this._colourCodingUniformPointer,this._modelId),this.doDraw()}}},{key:"checkSelMian",value:function(e){var t=this.viewer;if(this.stopped||t.plugins.indexOf(this)<0)return 0;var i=this.getId(e.clientX,e.clientY);return i.id}},{key:"getId",value:function(e,t){var i=this.viewer.canvas.getBoundingClientRect(),a=e-i.left,n=this.viewer.height-(t-i.top),r=this.viewer.gl,o=new ke["Framebuffer"](r,this.viewer.width,this.viewer.height,!0,this.viewer.glVersion);r.viewport(0,0,this.viewer.width,this.viewer.height),r.enable(r.DEPTH_TEST),r.disable(r.BLEND),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),this.onAfterDrawId();var s=o.getId(a,n),l=o.getXYZ(a,n);return o.delete(),{id:s,xyz:l}}}]),e}(),Se=function(){function e(){Object(ue["a"])(this,e)}return Object(fe["a"])(e,null,[{key:"onMouseMove1",value:function(e,t,i){}},{key:"onMouseMove",value:function(e,t,i){}},{key:"initMouseEvents",value:function(e){var t=this,i=!1,a=null,n=null,r=null,o=null,s=Oe["b"].create(),l=function(t){i=!0,a=t.clientX,n=t.clientY,r=t.clientX,o=t.clientY;var l=e.canvas.getBoundingClientRect(),c=r-l.left,h=e.height-(o-l.top),d=e.getEventData(c,h);if(null!=d)if(d.id,d.model,d.xyz,null==d||null==d.id||null==d.model){var u=e.getMergedRegion();if(null==u||null==u.centre)return void(i=!1);s=Oe["b"].fromValues(u.centre[0],u.centre[1],u.centre[2])}else if(null==d.xyz){var f=e.getTargetBoundingBox(d.id,d.model);s=Oe["b"].fromValues(f[0]+f[3]/2,f[1]+f[4]/2,f[2]+f[5]/2)}else s=d.xyz;else i=!1},c=function(e){i&&(i=!1)},h=function(e){var i=e.clientX,r=e.clientY,o=i-a,l=r-n;a=i,n=r,t.onMouseMove(o,l,s),t.onMouseMove1(i,r,s)};e.canvas.addEventListener("mousedown",(function(e){return l(e)}),!0),window.addEventListener("mouseup",(function(e){return c(e)}),!0),window.addEventListener("mousemove",(function(e){return h(e)}),!0)}}]),e}(),Ie=function(){function e(t,i){var a=this;Object(ue["a"])(this,e),this.linesDrawer=[],this.parent=i,this.viewer=t,this.clickChecker=new _e,this.viewer.addPlugin(this.clickChecker),this.hintTouchingPlane=new je,this.hintTouchingPlane.stopped=!0,this.viewer.addPlugin(this.hintTouchingPlane);var n,r=this.throttle((function(e){n&&(n.pointes.push(e),n.doDraw())}),30);this.viewer.on("mousedown",(function(e){var t=e.event;[t.clientX,t.clientY],e.xyz&&(e.xyz,n=new Le,a.viewer.addPlugin(n),a.linesDrawer.push(n),n.pointes=[],r(e.xyz))}));var o=!1;this.viewer.on("mousemove",(function(e){if(a.parent.flagMarking){e.event;if(e.xyz){r(e.xyz),o=!0;var t=e.id,i=e.model,n=500,s=a.viewer.getProductBoundingBox(t,i),l=a.clickChecker.getClickPanel(s,e.event);if(!l)return;var c=Object(Pe["a"])(l.plane,4),h=c[0],d=c[1],u=c[2],f=c[3],v=Oe["b"].fromValues(h[0],h[1],h[2]),g=Oe["b"].fromValues(d[0],d[1],d[2]),p=Oe["b"].fromValues(u[0],u[1],u[2]),m=Oe["b"].fromValues(f[0],f[1],f[2]),b=Oe["b"].create();Oe["b"].subtract(b,v,g),Oe["b"].normalize(b,b),Oe["b"].scale(b,b,n);var w=Oe["b"].create();Oe["b"].subtract(w,p,m),Oe["b"].normalize(w,w),Oe["b"].scale(w,w,n);var y=Oe["b"].create();Oe["b"].subtract(y,v,p),Oe["b"].normalize(y,y),Oe["b"].scale(y,y,n);var k=e.xyz,O=Oe["b"].create(),P=Oe["b"].create(),C=Oe["b"].create(),_=Oe["b"].create();Oe["b"].add(O,k,b),Oe["b"].subtract(P,k,b),Oe["b"].add(C,k,y),Oe["b"].subtract(_,k,y),a.hintTouchingPlane.pointes=[O,C,_,P],a.hintTouchingPlane.dirId=l.id,a.hintTouchingPlane.doDraw()}}})),this.viewer.on("mouseup",(function(e){n=void 0,a.parent.flagMarking&&(o||alert("起始点必须在某个面上"))}))}return Object(fe["a"])(e,[{key:"throttle",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=Date.now(),n=function(n){var r=arguments,o=Date.now();o-a>=i&&(t.apply(e,r),a=Date.now())};return n}},{key:"clearAll",value:function(){this.linesDrawer.forEach((function(e){e.stopped=!0,e.pointes=[],e.stopped=!1,e.doDraw()}))}},{key:"getTouchPoint",value:function(){}},{key:"getGridData",value:function(){}}]),e}(),Re=i("2ef0"),ze=i.n(Re);(function(e){e[e["SELECTED"]=1]="SELECTED",e[e["HIDDEN"]=2]="HIDDEN",e[e["IN_TRANSPORT"]=11]="IN_TRANSPORT",e[e["IN_PRODUCED"]=12]="IN_PRODUCED",e[e["IN_INSTALL"]=13]="IN_INSTALL",e[e["NOT_PRODUCED"]=14]="NOT_PRODUCED",e[e["PRODUCED_COMPLETED"]=15]="PRODUCED_COMPLETED",e[e["INSTALL_COMPLETED"]=16]="INSTALL_COMPLETED",e[e["TRANSPORT_COMPLETED"]=17]="TRANSPORT_COMPLETED"})(Ae||(Ae={}));var Ne=function(){function e(){Object(ue["a"])(this,e),this.action=0,this.fps=0,this._flagMarking=!1,this._flagWalking=!1,this._flagHighlightSelect=!0,this.hilightedDataList=[],this.selectedChildren=[],this.ComponentID=null,this.state="",this.IN_TRANSPORT_DataList=[],this.IN_PRODUCED_DataList=[],this.IN_INSTALL_DataList=[],this.NOT_PRODUCED_DataList=[],this.PRODUCED_COMPLETED_DataList=[],this.INSTALL_COMPLETED_DataList=[],this.TRANSPORT_COMPLETED_DataList=[],this.id="",this._flagMeasuring=!1,this.currentPoint=[-1,-1,-1],this.models=[],this.Frequency=null,this.stateFlag=!1,this.token="",this.newDataTree=[],this.stateTree=[],this.lastClickId=-1,this.listHidden=[],this._flagMouseDownClip=!1,this._showClipping=!0,this.flagClippingCreating=!1,this._flagClipping=!1,this.flagCreateNew=!1,this.flagClip=!1,this.clippingId="A",this.changeClippingPrg=!1,this.lastPrg=50,this.clippingPlanes=[],this._flagRotate=!1}return Object(fe["a"])(e,[{key:"lookAt",value:function(e){this.viewer.zoomTo(e)}},{key:"flagMarking",get:function(){return this._flagMarking},set:function(e){this._flagMarking=e,e&&(this.flagClipping=!1,this.flagWalking=!1),this.checkHighlight(),this.updateMouseMove()}},{key:"flagWalking",get:function(){return this._flagWalking},set:function(e){e&&(this.flagMarking=!1,this.flagClipping=!1),this._flagWalking=e}},{key:"flagHighlightSelect",get:function(){return this._flagHighlightSelect},set:function(e){this._flagHighlightSelect=e,this.updateSelHighlight()}},{key:"checkHighlight",value:function(){this.flagHighlightSelect=!this.flagMeasuring&&!this.flagClipping&&!this.flagMarking}},{key:"doLookAt",value:function(e){var t=this.selectedData?this.selectedData.model:1,i=[];e.forEach((function(e){i.push({model:t,id:e})})),console.log(i),this.lookAt(i)}},{key:"updateSelHighlight",value:function(){var e=this;if(this.stateFlag){switch(console.log("着色"+this.state,this.hilightedDataList),this.state){case"运输中":this.hilightedDataList.forEach((function(t){e.viewer.setStyle(Ae.IN_TRANSPORT,t.list,t.model),e.state=""}));break;case"加工中":this.hilightedDataList.forEach((function(t){e.viewer.setStyle(Ae.IN_PRODUCED,t.list,t.model),e.state=""}));break;case"安装中":this.hilightedDataList.forEach((function(t){e.viewer.setStyle(Ae.IN_INSTALL,t.list,t.model),e.state=""}));break;case"未开始":this.hilightedDataList.forEach((function(t){e.viewer.setStyle(Ae.NOT_PRODUCED,t.list,t.model),e.state=""}));break;case"加工完成":this.hilightedDataList.forEach((function(t){e.viewer.setStyle(Ae.PRODUCED_COMPLETED,t.list,t.model),e.state=""}));break;case"安装完成":this.hilightedDataList.forEach((function(t){e.viewer.setStyle(Ae.INSTALL_COMPLETED,t.list,t.model),e.state=""}));break;case"运输完成":this.hilightedDataList.forEach((function(t){e.viewer.setStyle(Ae.TRANSPORT_COMPLETED,t.list,t.model),e.state=""}));break;default:this.hilightedDataList.forEach((function(t){e.viewer.setStyle(ke["State"].UNSTYLED,t.list,t.model)}))}this.hilightedDataList=[],this.selectedData&&(this.flagHighlightSelect?(this.viewer.setStyle(Ae.SELECTED,this.selectedChildren||[this.selectedData.id],this.selectedData.model),this.hilightedDataList.push({list:this.selectedChildren||[this.selectedData.id],modal:this.selectedData.model})):this.viewer.setStyle(Ae.COMPLETED,[this.selectedData.id],this.selectedData.model))}else this.hilightedDataList.forEach((function(t){e.viewer.setStyle(ke["State"].UNSTYLED,t.list,t.model)})),this.hilightedDataList=[],this.selectedData&&(this.flagHighlightSelect?(this.viewer.setStyle(Ae.SELECTED,this.selectedChildren||[this.selectedData.id],this.selectedData.model),this.hilightedDataList.push({list:this.selectedChildren||[this.selectedData.id],modal:this.selectedData.model})):this.viewer.setStyle(ke["State"].UNSTYLED,[this.selectedData.id],this.selectedData.model))}},{key:"updateState",value:function(){this.viewer.setStyle(Ae.IN_TRANSPORT,this.IN_TRANSPORT_DataList),this.viewer.setStyle(Ae.IN_PRODUCED,this.IN_PRODUCED_DataList),this.viewer.setStyle(Ae.IN_INSTALL,this.IN_INSTALL_DataList),this.viewer.setStyle(Ae.NOT_PRODUCED,this.NOT_PRODUCED_DataList),this.viewer.setStyle(Ae.PRODUCED_COMPLETED,this.PRODUCED_COMPLETED_DataList),this.viewer.setStyle(Ae.INSTALL_COMPLETED,this.INSTALL_COMPLETED_DataList),this.viewer.setStyle(Ae.TRANSPORT_COMPLETED,this.TRANSPORT_COMPLETED_DataList)}},{key:"resetState",value:function(){this.viewer.resetStyles()}},{key:"flagMeasuring",get:function(){return this._flagMeasuring},set:function(e){e||this.clearMeasure(),this._flagMeasuring=e,this.checkHighlight()}},{key:"selectedData",get:function(){return this._selectedData},set:function(e){this._selectedData=e,this.selectedData&&(this.selectedChildren=[this.selectedData.id])}},{key:"onUpdateSel",value:function(e){}},{key:"selectedHandler",value:function(e,t){}},{key:"init",value:function(e){this.viewer=new ke["Viewer"](e),this.ctrMarking=new Ie(this.viewer,this),this.definedColor(),this.viewer.background=[255,255,255],this.pannelClickChecker=new _e,this.viewer.addPlugin(this.pannelClickChecker),this.measure=new Ee,this.measure.init(this.viewer),this.viewer.addPlugin(this.measure),this.listen();var t=new ke["NavigationCube"];t.ratio=.1,t.passiveAlpha=1.2,t.activeAlpha=1,t.highlighting=2,t.minSize=100,this.viewer.addPlugin(t)}},{key:"scrollFunc",value:function(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();var t=this.clippingPlanes.find((function(e){return e.plugin.flagSelected}));if(t){var i=t.plugin.lastPrg+.01*e.deltaY;this.lastPrg=i,t.plugin.doMoveByPrg(i)}}},{key:"listen",value:function(){var e=this;this.viewer.canvas.addEventListener("wheel",(function(t){e.scrollFunc(t)}),!0),this.viewer.on("error",(function(t){var i=e.viewer.canvas.parentNode;i&&(i.innerHTML="<pre style='color:red;'>"+t.message+"</pre>"+i.innerHTML)}));var t=null;Se.initMouseEvents(this.viewer),this.viewer.on("pick",(function(i){e.viewer.getCurrentWcs();var a=i.event;if(t)a.clientX,t.x,a.clientX,t.x;t=a})),this.viewer.on("pick",(function(t){e.Frequency&&(e.Frequency=clearInterval(e.Frequency)),e.Frequency=setTimeout((function(){e.lastPickArg=t;var i=e.viewer.getCurrentWcs();if(t.xyz){e.handlePick(t),e.stateFlag&&e.newDataTree.forEach((function(i){i.parts.includes(String(t.id))&&ze.a.forIn(e.stateTree,(function(t,a){if(t.includes(i.id))return console.log(a),e.state=a,!1}))})),e.viewer.draw();Oe["b"].add(Oe["b"].create(),i,t.xyz);e.onUpdateSel(Object.assign({fromModelClick:!0},e.selectedData))}e.flagCreateNew=!1}),300)})),this.viewer.on("dblclick",(function(t){e.Frequency&&(e.Frequency=clearInterval(e.Frequency)),t.id&&e.lookAt([t])})),this.viewer.on("fps",(function(t){e.fps=t})),this.viewer.on("mouseup",(function(t){e.flagMouseDownClip=!1})),this.viewer.on("mousedown",(function(t){e.flagMouseDownClip=!0,e.selectedClipPlane=0,e.clippingPlanes.forEach((function(i){var a=i.plugin.checkSelMian(t.event);a&&(e.selectedClipPlane=a)})),e.flagRotate=!1}))}},{key:"definedColor",value:function(){this.viewer.defineStyle(Ae.SELECTED,[0,255,0,170]),this.viewer.defineStyle(Ae.HIDDEN,[0,255,0,0]),this.viewer.defineStyle(Ae.IN_TRANSPORT,[245,36,67,255]),this.viewer.defineStyle(Ae.IN_PRODUCED,[240,131,0,255]),this.viewer.defineStyle(Ae.IN_INSTALL,[255,255,36,255]),this.viewer.defineStyle(Ae.NOT_PRODUCED,[2,179,64,255]),this.viewer.defineStyle(Ae.PRODUCED_COMPLETED,[121,210,210,255]),this.viewer.defineStyle(Ae.INSTALL_COMPLETED,[46,98,205,255]),this.viewer.defineStyle(Ae.TRANSPORT_COMPLETED,[204,153,255,255])}},{key:"clearMeasure",value:function(){this.measure.points=[],this.measure.stopped=!0,this.measure.clearAll(),this.measure.doDraw()}},{key:"handlePick",value:function(e){var t=this.viewer.getCurrentWcs(),i=Oe["b"].add(Oe["b"].create(),t,e.xyz),a=e.id,n=e.model,r=[i[0],i[1],i[2]];if(this.flagMeasuring&&a&&n)return this.measure.stopped=!1,this.measure.points.push(r),void this.measure.doDraw();this.flagClipping?this.createClippingPlane(e):this.flagMarking||(this.currentPoint=r,this.selectedData&&this.selectedData.id==a?this.resetSelected():this.selectedData={id:a,model:n},this.updateSelHighlight())}},{key:"changeSelected",value:function(e,t){this.selectedHandler&&this.selectedHandler(e,t),this.selectedData={id:e,model:t}}},{key:"walk",value:function(e,t){if(this.flagWalking){var i=0,a=0,n=t/5;1==e&&(a+=2*n),2==e&&(i-=n),3==e&&(a-=2*n),4==e&&(i+=n),0!=a?this.viewer.navigate("walk",i,a,Oe["b"].fromValues(0,0,0)):0!=i&&this.viewer.navigate("pan",i,a,Oe["b"].fromValues(0,0,0))}}},{key:"showAllItems",value:function(e){this.viewer.setState(ke["State"].UNSTYLED,this.listHidden,e),this.listHidden=[]}},{key:"hideItems",value:function(e,t){this.showAllItems(t),this.listHidden=this.listHidden.concat(e),this.viewer.setState(ke["State"].HIDDEN,e,t)}},{key:"resetSelected",value:function(){this.selectedData=void 0}},{key:"loadViewAsync",value:function(){var e=Object(de["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.viewer.load(t,void 0,void 0,(function(e){}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"loadView",value:function(e,t){var i=this;this.viewer.load(e,e.name),this.viewer.xrayColour=[245,0,0,20];var a=function e(a){i.models.push({id:a.model,name:a.tag,stopped:!1}),i.viewer.show(ke["ViewType"].DEFAULT,void 0,void 0,!1),t&&t(a),i.viewer.off("loaded",e),i.viewer.start(a.model)};this.viewer.on("loaded",a)}},{key:"unload",value:function(e){this.viewer.unload(e),this.models=this.models.filter((function(t){return t.id!==e})),this.viewer.draw()}},{key:"stop",value:function(e){this.viewer.stop(e);var t=this.models.filter((function(t){return t.id===e})).pop();t.stopped=!0}},{key:"start",value:function(e){this.viewer.start(e);var t=this.models.filter((function(t){return t.id===e})).pop();t.stopped=!1}},{key:"updateMouseMove",value:function(){var e=this.selectedClipPlane||this.flagMarking;return this.toggleMouseMove(!e),e}},{key:"flagMouseDownClip",get:function(){return this._flagMouseDownClip},set:function(e){this._flagMouseDownClip=e,this.updateMouseMove()}},{key:"showClipping",get:function(){return this._showClipping},set:function(e){this._showClipping=e,this.clippingPlanes.forEach((function(t){t.plugin.stopped=!e}))}},{key:"moveClippingplane",value:function(e){var t=this.clippingPlanes.find((function(e){return e.plugin.flagSelected}));t&&t.plugin.doMoveByPrg(e)}},{key:"flagClipping",get:function(){return this._flagClipping},set:function(e){e?(this.flagWalking=!1,this.flagMarking=!1):this.toggleClipping(!1),this._flagClipping=e,this.checkHighlight()}},{key:"toggleClipping",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e||this.resetClipBox()}},{key:"selectedClipPlane",get:function(){return this._selectedClipPlane},set:function(e){var t=this;console.log(e,"arg"),this._selectedClipPlane=e,this.clippingPlanes.forEach((function(e){var i=e.plugin;i.stopped=!0,i.toggleSelected(i.id==t.selectedClipPlane),t.showClipping&&(i.stopped=!1)})),this.changeClippingPrg=!1;var i=this.clippingPlanes.find((function(e){return e.plugin.id==t.selectedClipPlane}));i&&(this.changeClippingPrg=!0,this.lastPrg=i.plugin.lastPrg),this.updateMouseMove()}},{key:"createClippingPlane",value:function(e){if(this.flagCreateNew){var t=e.id,i=e.model,a=this.viewer.getProductBoundingBox(t,i);this.createClipBox(a)}}},{key:"createClipBox",value:function(e){var t=this;if(!(this.clippingPlanes.length>=2)){var i=this.clippingPlanes.length,a=this.pannelClickChecker.getClickPanel(e,this.lastPickArg.event),n=function(){var e=a.faxian[0],n=a.faxian[1],r=Oe["b"].fromValues(n[0]-e[0],n[1]-e[1],n[2]-e[2]);Oe["b"].normalize(r,r);var o=t.getPanel(a.faxian[0],[r[0],r[1],r[2]]);0==i?(t.viewer.unclip(),t.viewer.setClippingPlaneA(o)):t.viewer.setClippingPlaneB(o)};n();var r=new je;this.viewer.addPlugin(r),r.pointes=a.plane1,r.faxian=a.faxian,r.pointesBack=JSON.parse(JSON.stringify(a.plane1)),r.dirId=a.id,r.doDraw(),r.doOnChangePos=function(e,a){var n=a[0],r=a[1],o=Oe["b"].fromValues(r[0]-n[0],r[1]-n[1],r[2]-n[2]);Oe["b"].normalize(o,o);var s=t.getPanel(a[0],[o[0],o[1],o[2]]);0==i?(t.viewer.unclip(),t.viewer.setClippingPlaneA(s)):t.viewer.setClippingPlaneB(s)};var o={plugin:r,clipId:i};r.id=1e3+o.clipId,this.clippingPlanes.push(o)}}},{key:"cancelSelClipPlane",value:function(){this.selectedClipPlane=null}},{key:"toggleMouseMove",value:function(e){this.viewer.navigationMode=e?"orbit":"none"}},{key:"getPanel",value:function(e,t){var i=0-t[0]*e[0]-t[1]*e[1]-t[2]*e[2];return[t[0],t[1],t[2],i]}},{key:"resetClipBox",value:function(){var e=this;this.clippingPlanes.forEach((function(t){t.plugin.beforeDestroy&&t.plugin.beforeDestroy(),e.viewer.removePlugin(t.plugin)})),this.clippingPlanes=[],this.selectedClipPlane=null,this.viewer.unclip()}},{key:"flagRotate",get:function(){return this._flagRotate},set:function(e){this._flagRotate=e,e?this.viewer.startRotation():this.viewer.stopRotation()}}]),e}(),Ue={class:"wrap-tree noselect"},Be=Object(a["o"])("div",{class:"card-header"},[Object(a["o"])("span",null,"目录树")],-1);function Fe(e,t,i,n,r,o){var s=Object(a["N"])("el-input"),l=Object(a["N"])("el-col"),c=Object(a["N"])("el-option"),h=Object(a["N"])("el-select"),d=Object(a["N"])("el-row"),u=Object(a["N"])("el-tree"),f=Object(a["N"])("el-scrollbar"),v=Object(a["N"])("el-card");return Object(a["F"])(),Object(a["k"])("div",Ue,[Object(a["o"])(v,{class:"box-card"},{header:Object(a["cb"])((function(){return[Be]})),default:Object(a["cb"])((function(){return[Object(a["o"])(d,{gutter:20},{default:Object(a["cb"])((function(){return[Object(a["o"])(l,{span:12},{default:Object(a["cb"])((function(){return[Object(a["o"])(s,{clearable:"",onChange:e.doSearch,modelValue:e.searchKey,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.searchKey=t}),placeholder:"请输入关键字搜索"},null,8,["onChange","modelValue"])]})),_:1}),Object(a["o"])(l,{span:12},{default:Object(a["cb"])((function(){return[Object(a["o"])(h,{onChange:e.onChangeTag,modelValue:e.searchTag,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.searchTag=t}),placeholder:"请选择显示条件"},{default:Object(a["cb"])((function(){return[(Object(a["F"])(!0),Object(a["k"])(a["b"],null,Object(a["L"])(e.showOpts,(function(e){return Object(a["F"])(),Object(a["k"])(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["onChange","modelValue"])]})),_:1})]})),_:1}),Object(a["M"])(e.$slots,"default"),Object(a["o"])(f,{"max-height":"500px"},{default:Object(a["cb"])((function(){return[Object(a["o"])(u,{"show-checkbox":!0,accordion:"",class:"filter-tree mgTop8",data:e.listShow,props:e.defaultProps,ref:"tree","node-key":"id","filter-node-method":e.filterNode,onNodeClick:e.onSingleClick},{default:Object(a["cb"])((function(t){var i=t.node,n=t.data;return[Object(a["o"])("div",{class:"custom-tree-node",onDblclick:Object(a["fb"])((function(t){return e.onDbClick(n)}),["stop","prevent"])},[Object(a["o"])("span",null,Object(a["R"])(n.groupName||n.mark||n[e.searchTag]),1),Object(a["o"])("span",null,[Object(a["o"])("i",{onClick:Object(a["fb"])((function(){return e.toggleHidden(n,i)}),["stop"]),class:"icon icon-ic_".concat(e.checkHidden(n)?"invisible":"visible")},null,10,["onClick"])])],40,["onDblclick"])]})),_:1},8,["data","props","filter-node-method","onNodeClick"])]})),_:1})]})),_:3})])}i("d81d");var Xe=function(e){Object(ve["a"])(i,e);var t=Object(ge["a"])(i);function i(){var e;return Object(ue["a"])(this,i),e=t.apply(this,arguments),e.delayClick=300,e.showOpts=[{label:"typeName",value:"typeName"},{label:"name",value:"name"},{label:"width",value:"width"},{label:"mark",value:"mark"},{label:"unitWeight",value:"unitWeight"},{label:"bottomElevation",value:"bottomElevation"},{label:"id",value:"id"}],e.listShow=[],e.searchTag="name",e.searchKey="",e.defaultProps={children:"children",label:"name"},e}return Object(fe["a"])(i,[{key:"onSingleClick",value:function(e){var t=this;clearTimeout(this.timerClick),this.timerClick=setTimeout((function(){console.log("触发单击",e),t.doSelPord(e)}),this.delayClick)}},{key:"onDbClick",value:function(e){clearTimeout(this.timerClick),e.parts&&(console.log("触发lookat",e),this.doLookAt(e.parts.split(",")))}},{key:"filterNode",value:function(e,t){return!t.isProd&&(""+t[this.searchTag]).indexOf(e)>-1}},{key:"checkHidden",value:function(e){var t=this.getProdId(e);return t.every((function(e){return e.hidden}))}},{key:"doLookAt",value:function(e){this.$emit("doLookAt",e)}},{key:"getProdId",value:function(e){var t=this,i=[];return e.children?e.children.forEach((function(e){i=i.concat(t.getProdId(e))})):i=i.concat([e]),i}},{key:"doSelPord",value:function(e){e.groupName?this.$emit("getDetailInfo",{}):(console.log(222,e),this.$emit("getDetailInfo",e),this.$emit("selInModel",e.parts.split(","),e.id))}},{key:"mounted",value:function(){this.updateData()}},{key:"onChangeTag",value:function(){this.searchKey="",this.doSearch()}},{key:"updateVisible",value:function(){var e=[];this.getProdId({children:this.listShow});this.listShow.forEach((function(t){t.children.forEach((function(t){t.hidden&&t.parts.split(",").forEach((function(t){e.push(+t)}))}))})),this.$emit("hideItems",e)}},{key:"toggleAll",value:function(e){var t=this,i=this.$refs.tree.getCheckedNodes(!0);i.forEach((function(i){var a=t.$refs.tree.getNode(i.id);a.data.hidden=!e})),this.updateVisible()}},{key:"toggleHidden",value:function(e,t){e.hidden=!e.hidden;var i=this.getProdId(e);i.forEach((function(t){t.hidden=e.hidden})),this.updateVisible()}},{key:"doSearch",value:function(){this.updateData()}},{key:"updateData",value:function(){var e=this,t=[];this.listParts=[],this.treeList.forEach((function(i){i.children.forEach((function(i){var a=t.find((function(t){return t.groupName==i[e.searchTag]}));a||(a={groupName:i[e.searchTag],children:[],isGroup:!0},t.push(a)),a.children.push(i),e.listParts.push(i)}))})),this.listShow=t,this.$nextTick((function(){e.$refs.tree.filter(e.searchKey)}))}}]),i}(me["b"]);Xe=Object(pe["a"])([Object(me["a"])({watch:{treeList:function(){this.updateData()},displayflag:function(){this.toggleAll(this.displayflag)}},props:{treeList:{type:Array,default:function(){return[]}},displayflag:{type:Boolean,default:null}},computed:{selectedIds:function(){return this.$refs.tree.getCheckedNodes(!0).map((function(e){return e.id}))}}})],Xe);var Ve=Xe;const He=o()(Ve,[["render",Fe]]);var Ye=He,We=i("7864"),Ge=i("93bf"),Ke=i.n(Ge),qe=function(e){Object(ve["a"])(i,e);var t=Object(ge["a"])(i);function i(){var e;return Object(ue["a"])(this,i),e=t.apply(this,arguments),e.loadingDetail=!1,e.detailData={},e.loading=!1,e.searchKey="",e.dataTree=[],e.style="",e.selData={},e.ctrXbim=new Ne,e.selAxis="",e.Attribute_details=!1,e.flag=!0,e.isFullscreen=!1,e.Modeflag=!1,e.colorkey=[],e.stateUrl="",e.fid="",e.token="",e.camera=!1,e.stateTree=[],e.downKey="",e}return Object(fe["a"])(i,[{key:"prodDataLoaded",value:function(e){this.loadingDetail=!1,this.detailData=e}},{key:"getDetailInfo",value:function(e){var t=this;console.log(e);e.parId;if(e.fromModelClick)this.loadingDetail=!0,e.id&&(we()({url:"http://192.168.0.117:9001/bimwebservice/ifcfile/select/structure",method:"post",headers:{accessToken:this.token},data:{filePath:"http://192.168.0.117:9002//2020SJ036 杭政储出[2020]18号地块商品住宅4#楼\\三维模型管理\\模型1\\sushelou.ifc",fileid:"3108",label:e.id,type:0}}).then((function(e){0===e.data.code&&t.prodDataLoaded(JSON.parse(e.data.data))})),this.sendMsgToPar("loadProdData",{id:e.id}));else{var i={};for(var a in e)"parts"!=a&&(i[a]=e[a]);this.detailData=i}}},{key:"changeClipPrg",value:function(){this.ctrXbim.moveClippingplane(this.progress)}},{key:"doLookAt",value:function(e){this.ctrXbim.doLookAt(e)}},{key:"selInModel",value:function(e,t){var i=this;this.ctrXbim.selectedData={id:1,model:1},this.ctrXbim.selectedChildren=e,this.ctrXbim.ComponentID=t,this.Modeflag?ze.a.forIn(this.stateTree,(function(e,a){if(e.includes(t))return i.ctrXbim.state=a,i.ctrXbim.updateSelHighlight(),!1})):this.ctrXbim.updateSelHighlight()}},{key:"checkSelectedProdIds",value:function(e){this.getDetailInfo(e)}},{key:"clearMarking",value:function(){this.ctrXbim.ctrMarking.clearAll()}},{key:"progress",get:function(){return this.ctrXbim.lastPrg},set:function(e){this.ctrXbim.lastPrg=e}},{key:"self",get:function(){return this}},{key:"mounted",value:function(){var e=Object(de["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.addEventListener("message",this.onParMsg),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),this.onUpdate(),this.ctrXbim.init(this.$refs.canvas),this.ctrXbim.onUpdateSel=function(e){t.checkSelectedProdIds(e)},window.doDraw=this.doDraw,window.url=this.getstateurl,window.token=this.gettoken,this.sendMsgToPar("222",{a:2});case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onParMsg",value:function(e){e.origin;console.log(e.data,"eeeeeeeeeee");try{var t=JSON.parse(e.data);switch(t.type){case"prodDataLoaded":console.log(t.type),this.prodDataLoaded(t.data);break}}catch(i){}}},{key:"sendMsgToPar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.parent.postMessage(JSON.stringify({type:e,data:t}),"*")}},{key:"onUpdate",value:function(e){if(e){var t=e-this.lastTime;this.lastTime=e,this.handleKeyEvent(t)}requestAnimationFrame(this.onUpdate)}},{key:"doDraw",value:function(e,t){var i=this;this.loading=!0,this.ctrXbim.loadView(t,(function(t){i.loading=!1,e.model=t.model,i.dataTree.push(e),i.dataTree=i.dataTree.concat()}))}},{key:"getstateurl",value:function(e){this.stateUrl=e.data,this.fid=e.fid,this.ctrXbim.fid=e.fid}},{key:"gettoken",value:function(e){this.token=e.token,this.ctrXbim.token=e.token}},{key:"printData",value:function(){console.log(Object.keys(this.detailData))}},{key:"resetPlane",value:function(){this.progress=50,this.ctrXbim.resetClipBox()}},{key:"onKeyUp",value:function(e){e.key==this.downKey&&(this.downKey="")}},{key:"onKeyDown",value:function(e){this.downKey=e.key}},{key:"handleKeyEvent",value:function(e){switch(this.downKey){case"w":this.ctrXbim.walk(1,e);break;case"a":this.ctrXbim.walk(4,e);break;case"s":this.ctrXbim.walk(3,e);break;case"d":this.ctrXbim.walk(2,e);break}}},{key:"loadJson",value:function(e){return new Promise((function(t){we()({url:e,method:"get"}).then((function(e){t(e.data)}))}))}},{key:"loadFile",value:function(e){var t=this;return new Promise((function(i){t.loading=!0,we()({url:e,method:"get",responseType:"blob"}).then((function(e){var a=e.data;t.ctrXbim.loadView(a,(function(e){t.loading=!1,i(e)}))}))}))}},{key:"hideItems",value:function(e){this.ctrXbim.hideItems(e,1)}},{key:"cameraChange",value:function(){this.camera=!this.camera,this.camera?this.ctrXbim.viewer.camera=1:this.ctrXbim.viewer.camera=0}},{key:"toggleChange",value:function(){var e=this,t=document.getElementsByClassName("gld_mode")[0];this.Modeflag?t.classList.remove("active"):t.classList.add("active"),this.Modeflag=!this.Modeflag;var i=JSON.parse(JSON.stringify(this.dataTree[0].children));this.Modeflag?(this.ctrXbim.hilightedDataList=[],this.ctrXbim.stateFlag=!0,we()({url:"http://192.168.0.117:9001/bimwebservice/ifcfile/select/structures/status",headers:{accessToken:this.token},method:"post",data:{fid:"3108"}}).then((function(t){if(0===t.data.code){var a=JSON.parse(t.data.data);e.ctrXbim.stateTree=a,e.stateTree=a,ze.a.forIn(a,(function(t,i){e.colorkey.push(i)}));var n=[],r=[],o=[],s=[],l=[],c=[],h=[];a.运输中.forEach((function(e){ze.a.find(i,["id",e]).parts.split(",").forEach((function(e){n.push(e)}))})),a.加工中.forEach((function(e){ze.a.find(i,["id",e]).parts.split(",").forEach((function(e){r.push(e)}))})),a.安装中.forEach((function(e){ze.a.find(i,["id",e]).parts.split(",").forEach((function(e){o.push(e)}))})),a.未开始.forEach((function(e){ze.a.find(i,["id",e]).parts.split(",").forEach((function(e){s.push(e)}))})),a.加工完成.forEach((function(e){ze.a.find(i,["id",e]).parts.split(",").forEach((function(e){l.push(e)}))})),a.安装完成.forEach((function(e){ze.a.find(i,["id",e]).parts.split(",").forEach((function(e){c.push(e)}))})),a.运输完成.forEach((function(e){ze.a.find(i,["id",e]).parts.split(",").forEach((function(e){h.push(e)}))})),e.ctrXbim.IN_TRANSPORT_DataList=n,e.ctrXbim.IN_PRODUCED_DataList=r,e.ctrXbim.IN_INSTALL_DataList=o,e.ctrXbim.NOT_PRODUCED_DataList=s,e.ctrXbim.PRODUCED_COMPLETED_DataList=l,e.ctrXbim.INSTALL_COMPLETED_DataList=c,e.ctrXbim.TRANSPORT_COMPLETED_DataList=h,e.ctrXbim.updateState()}}))):(this.ctrXbim.stateFlag=!1,this.ctrXbim.resetState())}},{key:"toggleRotate",value:function(){var e=document.getElementsByClassName("gld_rotate")[0];this.ctrXbim.flagRotate?e.classList.remove("active"):e.classList.add("active"),this.ctrXbim.flagRotate=!this.ctrXbim.flagRotate}},{key:"toggleMeasure",value:function(){var e=document.getElementsByClassName("gld_measure")[0];this.ctrXbim.flagMeasuring?e.classList.remove("active"):e.classList.add("active"),this.ctrXbim.flagMeasuring=!this.ctrXbim.flagMeasuring}},{key:"toggleWalking",value:function(){var e=document.getElementsByClassName("gld_roam")[0];this.ctrXbim.flagWalking?e.classList.remove("active"):e.classList.add("active"),this.ctrXbim.flagWalking=!this.ctrXbim.flagWalking}},{key:"toggleMarking",value:function(){var e=document.getElementsByClassName("gld_sign")[0];this.ctrXbim.flagMarking?e.classList.remove("active"):e.classList.add("active"),this.ctrXbim.flagMarking=!this.ctrXbim.flagMarking}},{key:"Markingnter",value:function(){var e=document.getElementsByClassName("remove_toolbar")[0];e.classList.add("display"),e.classList.remove("hidden")}},{key:"Markingout",value:function(){var e=document.getElementsByClassName("remove_toolbar")[0];e.classList.add("hidden"),e.classList.remove("display")}},{key:"toggleClipping",value:function(){var e=document.getElementsByClassName("gld_Sectioning")[0];this.ctrXbim.flagClipping?e.classList.remove("active"):e.classList.add("active"),this.ctrXbim.flagClipping=!this.ctrXbim.flagClipping}},{key:"toggleDetails",value:function(){var e=document.getElementsByClassName("gld_details")[0];this.Attribute_details?e.classList.remove("active"):e.classList.add("active"),this.Attribute_details=!this.Attribute_details}},{key:"remove",value:function(){this.Attribute_details=!1;var e=document.getElementsByClassName("gld_details")[0];e.classList.remove("active")}},{key:"toggleflag",value:function(){this.flag=!this.flag}},{key:"isScreenFull",value:function(){if(this.isFullscreen=!this.isFullscreen,!Ke.a.isEnabled)return We["a"].warning({message:"浏览器不支持全屏",type:"warning"}),!1;Ke.a.toggle()}},{key:"cancelSelClipPlane",value:function(){this.ctrXbim.cancelSelClipPlane()}},{key:"toggleClippingPlane",value:function(){var e=document.getElementsByClassName("able")[0];this.ctrXbim.showClipping?e.classList.add("active"):e.classList.remove("active"),this.ctrXbim.showClipping=!this.ctrXbim.showClipping}},{key:"toggleCreateClip",value:function(){this.ctrXbim.clippingPlanes.length>=2?We["a"].warning({message:"最多只能创建2个剖切面",type:"warning"}):this.ctrXbim.flagCreateNew=!this.ctrXbim.flagCreateNew}}]),i}(me["b"]);qe=Object(pe["a"])([Object(me["a"])({components:{Tree:Ye},props:{config:{type:Array,default:function(){return[]}}},computed:Object(he["a"])({},Object(ye["b"])([])),watch:{flagMeasuring:function(e){e||this.clearMeasure()},flagClipping:function(e){e||this.resetPlane()}}})],qe);var Je=qe;const $e=o()(Je,[["render",ce]]);var Ze=$e,Qe=[{path:"/",name:"xBim",component:Ze},{path:"/about",name:"About",component:function(){return i.e("about").then(i.bind(null,"f820"))}}],et=Object(h["a"])({history:Object(h["b"])(),routes:Qe}),tt=et,it=Object(ye["a"])({state:{},mutations:{},actions:{},modules:{}});i("0fae");Object(a["j"])(c,{}).use(it).use(tt).use(We["b"]).mount("#app")},cf90:function(e,t,i){"use strict";i("d6bd")},d6bd:function(e,t,i){}});
//# sourceMappingURL=app.06d2c7b5.js.map